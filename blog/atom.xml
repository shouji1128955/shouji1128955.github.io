<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://book.onlinebookshell.co.in/blog</id>
    <title>LiteShell Blog</title>
    <updated>2024-10-19T16:41:48.000Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://book.onlinebookshell.co.in/blog"/>
    <subtitle>LiteShell Blog</subtitle>
    <icon>https://book.onlinebookshell.co.in/img/favicon.ico</icon>
    <entry>
        <title type="html"><![CDATA[npm常用命令]]></title>
        <id>https://book.onlinebookshell.co.in/blog/2024/4.npm操作</id>
        <link href="https://book.onlinebookshell.co.in/blog/2024/4.npm操作"/>
        <updated>2024-10-19T16:41:48.000Z</updated>
        <summary type="html"><![CDATA[简介]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="简介">简介<a href="https://book.onlinebookshell.co.in/blog/2024/4.npm%E6%93%8D%E4%BD%9C#%E7%AE%80%E4%BB%8B" class="hash-link" aria-label="简介的直接链接" title="简介的直接链接">​</a></h2>
<p>npm是跟随node一起安装的包（模块）管理器。常见的使用场景有以下几种：</p>
<ul>
<li>允许用户从npm服务器下载别人编写的第三方包到本地使用。</li>
<li>允许用户从npm服务器下载并安装别人编写的命令行程序到本地使用。</li>
<li>允许用户将自己编写的包或命令行程序上传到npm服务器供别人使用。</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="常用命令">常用命令<a href="https://book.onlinebookshell.co.in/blog/2024/4.npm%E6%93%8D%E4%BD%9C#%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4" class="hash-link" aria-label="常用命令的直接链接" title="常用命令的直接链接">​</a></h2>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="检测是否安装及版本">检测是否安装及版本<a href="https://book.onlinebookshell.co.in/blog/2024/4.npm%E6%93%8D%E4%BD%9C#%E6%A3%80%E6%B5%8B%E6%98%AF%E5%90%A6%E5%AE%89%E8%A3%85%E5%8F%8A%E7%89%88%E6%9C%AC" class="hash-link" aria-label="检测是否安装及版本的直接链接" title="检测是否安装及版本的直接链接">​</a></h4>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm -v # 显示版本号说明已经安装相应的版本</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="生成packagejson文件">生成package.json文件<a href="https://book.onlinebookshell.co.in/blog/2024/4.npm%E6%93%8D%E4%BD%9C#%E7%94%9F%E6%88%90packagejson%E6%96%87%E4%BB%B6" class="hash-link" aria-label="生成package.json文件的直接链接" title="生成package.json文件的直接链接">​</a></h4>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm init</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>package.json用来描述项目中用到的模块和其他信息</p>
</blockquote>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="安装模块">安装模块<a href="https://book.onlinebookshell.co.in/blog/2024/4.npm%E6%93%8D%E4%BD%9C#%E5%AE%89%E8%A3%85%E6%A8%A1%E5%9D%97" class="hash-link" aria-label="安装模块的直接链接" title="安装模块的直接链接">​</a></h4>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm install # 安装package.json定义好的模块，简写 npm i</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 安装包指定模块</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm i &lt;ModuleName&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 全局安装</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm i &lt;ModuleName&gt; -g</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 安装包的同时，将信息写入到package.json中的 dependencies 配置中</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm i &lt;ModuleName&gt; --save</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 安装包的同时，将信息写入到package.json中的 devDependencies 配置中</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm i &lt;ModuleName&gt; --save-dev</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 安装多模块</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm i &lt;ModuleName1&gt; &lt;ModuleName2&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 安装方式参数：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-save # 简写-S，加入到生产依赖中</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-save-dev # 简写-D，加入到开发依赖中</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-g # 全局安装 将安装包放在 /usr/local 下或者你 node 的安装目录</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="查看">查看<a href="https://book.onlinebookshell.co.in/blog/2024/4.npm%E6%93%8D%E4%BD%9C#%E6%9F%A5%E7%9C%8B" class="hash-link" aria-label="查看的直接链接" title="查看的直接链接">​</a></h4>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 查看所有全局安装的包</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm ls -g</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 查看本地项目中安装的包</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm ls</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 查看包的 package.json文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm view &lt;ModuleName&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 查看包的依赖关系</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm view &lt;ModuleName&gt; dependencies</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 查看包的源文件地址</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm view &lt;ModuleName&gt; repository.url</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 查看包所依赖的node版本</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm view &lt;ModuleName&gt; engines</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 查看帮助</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm help</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="更新模块">更新模块<a href="https://book.onlinebookshell.co.in/blog/2024/4.npm%E6%93%8D%E4%BD%9C#%E6%9B%B4%E6%96%B0%E6%A8%A1%E5%9D%97" class="hash-link" aria-label="更新模块的直接链接" title="更新模块的直接链接">​</a></h4>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 更新本地模块</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm update &lt;ModuleName&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 更新全局模块</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm update -g &lt;ModuleName&gt; # 更新全局软件包。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm update -g # 更新所有的全局软件包。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm outdated -g --depth=0 # 找出需要更新的包。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="卸载模块">卸载模块<a href="https://book.onlinebookshell.co.in/blog/2024/4.npm%E6%93%8D%E4%BD%9C#%E5%8D%B8%E8%BD%BD%E6%A8%A1%E5%9D%97" class="hash-link" aria-label="卸载模块的直接链接" title="卸载模块的直接链接">​</a></h4>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 卸载本地模块</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm uninstall &lt;ModuleName&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 卸载全局模块</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm uninstall -g &lt;ModuleName&gt; # 卸载全局软件包。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="清空缓存">清空缓存<a href="https://book.onlinebookshell.co.in/blog/2024/4.npm%E6%93%8D%E4%BD%9C#%E6%B8%85%E7%A9%BA%E7%BC%93%E5%AD%98" class="hash-link" aria-label="清空缓存的直接链接" title="清空缓存的直接链接">​</a></h4>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 清空npm缓存</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm cache clear</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="使用淘宝镜像">使用淘宝镜像<a href="https://book.onlinebookshell.co.in/blog/2024/4.npm%E6%93%8D%E4%BD%9C#%E4%BD%BF%E7%94%A8%E6%B7%98%E5%AE%9D%E9%95%9C%E5%83%8F" class="hash-link" aria-label="使用淘宝镜像的直接链接" title="使用淘宝镜像的直接链接">​</a></h4>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 使用淘宝镜像</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm install -g cnpm --registry=https://registry.npm.taobao.org</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="其他">其他<a href="https://book.onlinebookshell.co.in/blog/2024/4.npm%E6%93%8D%E4%BD%9C#%E5%85%B6%E4%BB%96" class="hash-link" aria-label="其他的直接链接" title="其他的直接链接">​</a></h4>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 更改包内容后进行重建</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm rebuild &lt;ModuleName&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 检查包是否已经过时，此命令会列出所有已经过时的包，可以及时进行包的更新</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm outdated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 访问npm的json文件，此命令将会打开一个网页</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm help json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 发布一个包的时候，需要检验某个包名是否存在</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm search &lt;ModuleName&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 撤销自己发布过的某个版本代码</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm unpublish &lt;package&gt; &lt;version&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="使用技巧">使用技巧<a href="https://book.onlinebookshell.co.in/blog/2024/4.npm%E6%93%8D%E4%BD%9C#%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7" class="hash-link" aria-label="使用技巧的直接链接" title="使用技巧的直接链接">​</a></h2>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="多次安装不成功尝试先清除缓存">多次安装不成功尝试先清除缓存<a href="https://book.onlinebookshell.co.in/blog/2024/4.npm%E6%93%8D%E4%BD%9C#%E5%A4%9A%E6%AC%A1%E5%AE%89%E8%A3%85%E4%B8%8D%E6%88%90%E5%8A%9F%E5%B0%9D%E8%AF%95%E5%85%88%E6%B8%85%E9%99%A4%E7%BC%93%E5%AD%98" class="hash-link" aria-label="多次安装不成功尝试先清除缓存的直接链接" title="多次安装不成功尝试先清除缓存的直接链接">​</a></h4>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm cache clean -f</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="查看已安装的依赖包版本号">查看已安装的依赖包版本号<a href="https://book.onlinebookshell.co.in/blog/2024/4.npm%E6%93%8D%E4%BD%9C#%E6%9F%A5%E7%9C%8B%E5%B7%B2%E5%AE%89%E8%A3%85%E7%9A%84%E4%BE%9D%E8%B5%96%E5%8C%85%E7%89%88%E6%9C%AC%E5%8F%B7" class="hash-link" aria-label="查看已安装的依赖包版本号的直接链接" title="查看已安装的依赖包版本号的直接链接">​</a></h4>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm ls &lt;ModuleName&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>注意：用此方法才能准确的知道项目使用的版本号，查看package.json时，有“^" 符号表示大于此版本</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="npm发布包教程">npm发布包教程<a href="https://book.onlinebookshell.co.in/blog/2024/4.npm%E6%93%8D%E4%BD%9C#npm%E5%8F%91%E5%B8%83%E5%8C%85%E6%95%99%E7%A8%8B" class="hash-link" aria-label="npm发布包教程的直接链接" title="npm发布包教程的直接链接">​</a></h2>
<p><a href="https://segmentfault.com/a/1190000017461666" target="_blank" rel="noopener noreferrer">npm发布包教程</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="nrm的作用与使用">nrm的作用与使用<a href="https://book.onlinebookshell.co.in/blog/2024/4.npm%E6%93%8D%E4%BD%9C#nrm%E7%9A%84%E4%BD%9C%E7%94%A8%E4%B8%8E%E4%BD%BF%E7%94%A8" class="hash-link" aria-label="nrm的作用与使用的直接链接" title="nrm的作用与使用的直接链接">​</a></h2>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="nrm是什么">nrm是什么？<a href="https://book.onlinebookshell.co.in/blog/2024/4.npm%E6%93%8D%E4%BD%9C#nrm%E6%98%AF%E4%BB%80%E4%B9%88" class="hash-link" aria-label="nrm是什么？的直接链接" title="nrm是什么？的直接链接">​</a></h4>
<p>nrm(npm registry manager )是npm的镜像源管理工具，有时候国外资源太慢，使用这个就可以快速地在 npm 源间切换</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="nrm的安装">nrm的安装<a href="https://book.onlinebookshell.co.in/blog/2024/4.npm%E6%93%8D%E4%BD%9C#nrm%E7%9A%84%E5%AE%89%E8%A3%85" class="hash-link" aria-label="nrm的安装的直接链接" title="nrm的安装的直接链接">​</a></h4>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm install -g nrm</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="nrm命令">nrm命令<a href="https://book.onlinebookshell.co.in/blog/2024/4.npm%E6%93%8D%E4%BD%9C#nrm%E5%91%BD%E4%BB%A4" class="hash-link" aria-label="nrm��命令的直接链接" title="nrm命令的直接链接">​</a></h4>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">nrm ls　#查看可用的源（有*号的表示当前所使用的源,以下&lt;registry&gt;表示源的名称）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nrm use &lt;registry&gt; # 将npm下载源切换成指定的源</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nrm add &lt;registry&gt; &lt;url&gt; # 添加源，url为源的路径</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nrm del &lt;registry&gt; # 删除源</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nrm test &lt;registry&gt; # 测试源的响应时间，可以作为使用哪个源的参考</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nrm help　# 查看nrm帮助</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nrm home &lt;registry&gt;　# 跳转到指定源的官网</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="nrm使用">nrm使用<a href="https://book.onlinebookshell.co.in/blog/2024/4.npm%E6%93%8D%E4%BD%9C#nrm%E4%BD%BF%E7%94%A8" class="hash-link" aria-label="nrm使用的直接链接" title="nrm使用的直接链接">​</a></h4>
<p>如果在你的网络不太理想或者受到其他网络限制导致不能使用npm原本的源进行下载时，nrm就非常有用了，你只需要：</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">nrm ls # 查看可用的源</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nrm use &lt;registry&gt;　# 切换到指定源</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[mongodb数据库恢复]]></title>
        <id>https://book.onlinebookshell.co.in/blog/2023/12/19/mongodb数据库恢复</id>
        <link href="https://book.onlinebookshell.co.in/blog/2023/12/19/mongodb数据库恢复"/>
        <updated>2023-12-19T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[分析问题现状]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="分析问题现状">分析问题现状<a href="https://book.onlinebookshell.co.in/blog/2023/12/19/mongodb%E6%95%B0%E6%8D%AE%E5%BA%93%E6%81%A2%E5%A4%8D#%E5%88%86%E6%9E%90%E9%97%AE%E9%A2%98%E7%8E%B0%E7%8A%B6" class="hash-link" aria-label="分析问题现状的直接链接" title="分析问题现状的直接链接">​</a></h2>
<p>mongo版本： 3.2.17</p>
<p>故障， 服务器宕机之后，重启mongdb会报错，因为是生产环境，所有的配置都是固定的，多次修改配置无效之后，决定将文件系统数据同步到测试环境实现验证</p>
<p><img decoding="async" loading="lazy" alt="image-20231219193404022" src="https://book.onlinebookshell.co.in/assets/images/image-20231219193404022-c9a096c42159825159a6bfaeb0cc8473.png" width="1901" height="419" class="img_ev3q"></p>
<p>报错提示：  72 Requested option conflicts with current storage engine option for directoryForIndexes; you requested false but the current server storage is already set to true and cannot be changed, terminating</p>
<p>原因：   使用directoryForIndexes`选项与您当前的数据布局冲突且无法更改：因为server启动的时候请求的为false,但是本地数据默认设置为true.</p>
<p>因为是在容器中，生产环境我尽量保证数据不被损坏。然后下面导入到新环境</p>
<p>新的解决方案就是尝试修复数据，我们需要将生产的文件系统数据先备份然后导出</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="部署mongodb">部署mongodb<a href="https://book.onlinebookshell.co.in/blog/2023/12/19/mongodb%E6%95%B0%E6%8D%AE%E5%BA%93%E6%81%A2%E5%A4%8D#%E9%83%A8%E7%BD%B2mongodb" class="hash-link" aria-label="部署mongodb的直接链接" title="部署mongodb的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="yum-方式">yum 方式<a href="https://book.onlinebookshell.co.in/blog/2023/12/19/mongodb%E6%95%B0%E6%8D%AE%E5%BA%93%E6%81%A2%E5%A4%8D#yum-%E6%96%B9%E5%BC%8F" class="hash-link" aria-label="yum 方式的直接链接" title="yum 方式的直接链接">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo tee /etc/yum.repos.d/mongodb-org-3.2.repo &lt;&lt;EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[mongodb-org-3.2]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name=MongoDB Repository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">baseurl=https://repo.mongodb.org/yum/redhat/\$releasever/mongodb-org/3.2/x86_64/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gpgcheck=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">enabled=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gpgkey=https://www.mongodb.org/static/pgp/server-3.2.asc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>安装MongoDB：</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo yum install -y mongodb-org</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol>
<li>上述命令将安装MongoDB包及其相关工具。</li>
<li>启动MongoDB服务</li>
</ol>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl start mongod</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="二进制方式">二进制方式<a href="https://book.onlinebookshell.co.in/blog/2023/12/19/mongodb%E6%95%B0%E6%8D%AE%E5%BA%93%E6%81%A2%E5%A4%8D#%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%96%B9%E5%BC%8F" class="hash-link" aria-label="二进制方式的直接链接" title="二进制方式的直接链接">​</a></h3>
<p>官网下载地址：<code>https://www.mongodb.com/try/download/community</code></p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">wget https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-3.2.17.tgz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tar xf mongodb-linux-x86_64-3.2.17.tgz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mv  mongodb-linux-x86_64-3.2.17 /usr/local/mongodb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>创建数据与日志存放目录</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir  /usr/local/mongodb/data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mkdir /usr/local/mongodb/logs</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">echo 'export PATH=$PATH:/usr/local/mongodb/bin' &gt;&gt;/etc/profile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">source  /etc/profile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#测试</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">root@smart:/usr/local/mongodb# mongo -version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MongoDB shell version: 3.2.17</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">root@smart:/usr/local/mongodb#</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>创建配置文件mongodb.conf</p>
<p>这里直接拷贝yum方式部署之后的文件</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@clickhouse001 ~]# cat /etc/mongod.conf </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># mongod.conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># for documentation of all options, see:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#   http://docs.mongodb.org/manual/reference/configuration-options/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># where to write logging data.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemLog:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  destination: file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  logAppend: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  path: /var/log/mongodb/mongod.log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Where and how to store data.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">storage:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  dbPath: /var/lib/mongo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  journal:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    enabled: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#  engine:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#  mmapv1:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#  wiredTiger:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># how the process runs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">processManagement:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fork: true  # fork and run in background</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  pidFilePath: /var/run/mongodb/mongod.pid  # location of pidfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># network interfaces</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">net:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  port: 27017</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  bindIp: 127.0.0.1  # Listen to local interface only, comment to listen on all interfaces.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#security:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#operationProfiling:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#replication:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#sharding:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## Enterprise-Only Options</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#auditLog:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#snmp:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>修改之后将文件放到 /usr/local/mongodb/mongodb.conf</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root@smart:/usr/local/mongodb# cat /usr/local/mongodb/mongodb.conf </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># for documentation of all options, see:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#   http://docs.mongodb.org/manual/reference/configuration-options/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># where to write logging data.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemLog:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  destination: file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  logAppend: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  path: /usr/local/mongodb/logs/mongodb.log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Where and how to store data.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">storage:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  dbPath: /usr/local/mongodb/data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> journal:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    enabled: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#  engine:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#  mmapv1:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># how the process runs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">processManagement:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fork: true  # fork and run in background</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  pidFilePath: /usr/local/mongodb/mongod.pid  # location of pidfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># network interfaces</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">net:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  port: 27017</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  bindIp: 0.0.0.0  # Listen to local interface only, comment to listen on all interfaces.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="数据恢复">数据恢复<a href="https://book.onlinebookshell.co.in/blog/2023/12/19/mongodb%E6%95%B0%E6%8D%AE%E5%BA%93%E6%81%A2%E5%A4%8D#%E6%95%B0%E6%8D%AE%E6%81%A2%E5%A4%8D" class="hash-link" aria-label="数据恢复的直接链接" title="数据恢复的直接链接">​</a></h2>
<p>将生产环境的data文件系统数据拷贝到  /usr/local/mongodb/data/ 目录下（打包此处忽略）</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tar xf ~/sys-mongodb-data-claim-20231119.tar.gz  -C  /usr/local/mongodb/data/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>然后启动，观察日志</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/usr/local/mongodb/bin/mongod -f /usr/local/mongodb/mongodb.conf  #启动服务</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="image-20231219195125057" src="https://book.onlinebookshell.co.in/assets/images/image-20231219195125057-7e101d70356d57af5da5a67a58feebad.png" width="1892" height="226" class="img_ev3q"></p>
<p>需要修改配置文件增加字段： directoryForIndexes: false ，因为曾经的数据是为true,现在应该是服务启动的时候默认为false .需要手动增加配置</p>
<p>修改后：  增加以下几个字段</p>
<p>wiredTiger:
engineConfig:
cacheSizeGB: 1
directoryForIndexes: true<br>
<!-- -->statisticsLogDelaySecs: 0</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root@smart:/usr/local/mongodb# cat /usr/local/mongodb/mongodb.conf </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># for documentation of all options, see:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#   http://docs.mongodb.org/manual/reference/configuration-options/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># where to write logging data.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemLog:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  destination: file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  logAppend: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  path: /usr/local/mongodb/logs/mongodb.log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Where and how to store data.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">storage:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  dbPath: /usr/local/mongodb/data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  journal:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    enabled: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#  engine:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#  mmapv1:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  wiredTiger:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      engineConfig:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          cacheSizeGB: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          directoryForIndexes: true    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          statisticsLogDelaySecs: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># how the process runs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">processManagement:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fork: true  # fork and run in background</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  pidFilePath: /usr/local/mongodb/mongod.pid  # location of pidfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># network interfaces</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">net:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  port: 27017</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  bindIp: 0.0.0.0  # Listen to local interface only, comment to listen on all interfaces.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>重启服务</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mongod  --shutdown  --dbpath /usr/local/mongodb/data/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/usr/local/mongodb/bin/mongod -f /usr/local/mongodb/mongodb.conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>继续查看日志，继续报错：</p>
<p><img decoding="async" loading="lazy" alt="image-20231219195545511" src="https://book.onlinebookshell.co.in/assets/images/image-20231219195545511-2138b671d488dba62dd8c70122921749.png" width="1896" height="410" class="img_ev3q"></p>
<p>这个时候提示directoryPerDB 为true, 所以我们也需要修改为true,默认看日志是false</p>
<p>然后修改配置文件  directoryPerDB: true</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root@smart:/usr/local/mongodb# cat /usr/local/mongodb/mongodb.conf </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># for documentation of all options, see:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#   http://docs.mongodb.org/manual/reference/configuration-options/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># where to write logging data.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemLog:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  destination: file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  logAppend: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  path: /usr/local/mongodb/logs/mongodb.log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Where and how to store data.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">storage:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  dbPath: /usr/local/mongodb/data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  directoryPerDB: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  journal:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    enabled: true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>启动服务,查看日志</p>
<p><img decoding="async" loading="lazy" src="https://book.onlinebookshell.co.in/assets/images/image-20231219195858030-1702987146929-1a90f9a16be56c20350ff4e1b44a9c82.png" width="1899" height="382" class="img_ev3q"></p>
<p>看起来 MongoDB 在启动时遇到了与 WiredTiger 存储引擎相关的问题。具体而言，错误消息显示了有关无法读取根页面以及日志文件可能受到加密或来自旧版本的问题的错误。 数据已经出现损坏，需要我们修复</p>
<p>修改的方式，使用--repair</p>
<p><img decoding="async" loading="lazy" alt="image-20231219200220493" src="https://book.onlinebookshell.co.in/assets/images/image-20231219200220493-d309425e3c8ed7e4b5532605b61f9757.png" width="1918" height="338" class="img_ev3q"></p>
<p>似乎这个报错跟前面想相同，可能需要指定配置文件尝试</p>
<p><img decoding="async" loading="lazy" alt="image-20231219200430560" src="data:image/png;base64,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" width="1170" height="84" class="img_ev3q"></p>
<p>提示报错， 不能开启journaling配置，需要注释掉配置文件中此项</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">storage:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  dbPath: /usr/local/mongodb/data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  directoryPerDB: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  #journal:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   # enabled: true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>然后继续操作</p>
<p><img decoding="async" loading="lazy" alt="image-20231219200633226" src="data:image/png;base64,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" width="1084" height="89" class="img_ev3q"></p>
<p>根据提示，数据修复成功!</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="数据导出导入">数据导出导入<a href="https://book.onlinebookshell.co.in/blog/2023/12/19/mongodb%E6%95%B0%E6%8D%AE%E5%BA%93%E6%81%A2%E5%A4%8D#%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%87%BA%E5%AF%BC%E5%85%A5" class="hash-link" aria-label="数据导出导入的直接链接" title="数据导出导入的直接链接">​</a></h2>
<p>数据导出：</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mongoexport --host 127.0.0.1 --port 27017 --db sensorcmd --collection new_alarm --out new_alarm.json --jsonArray</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="image-20231219200855720" src="https://book.onlinebookshell.co.in/assets/images/image-20231219200855720-620b120191f13dc81d6ff33763b8067d.png" width="1471" height="90" class="img_ev3q"></p>
<p>导出说明：</p>
<p>--host：MongoDB服务器的主机名或IP地址。
--port：MongoDB服务器的端口号，默认为27017。
--db：要导出的数据库名称。
--collection：要导出的集合名称。
--out：导出数据的输出文件路径。
--jsonArray：将每个文档导出为JSON数组的元素，而不是多个独立的JSON文档。</p>
<p>数据导入到生产环境</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mongoimport --host localhost --port 27017 --db mydb --collection users --file users.json --jsonArray</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="image-20231219201205941" src="https://book.onlinebookshell.co.in/assets/images/image-20231219201205941-caf613f72f77fce1964ed4c81300244f.png" width="1344" height="78" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="问题">问题：<a href="https://book.onlinebookshell.co.in/blog/2023/12/19/mongodb%E6%95%B0%E6%8D%AE%E5%BA%93%E6%81%A2%E5%A4%8D#%E9%97%AE%E9%A2%98" class="hash-link" aria-label="问题：的直接链接" title="问题：的直接链接">​</a></h2>
<p>经过上面一番捯饬，数据都导入成功了，但是数据是还原了很少的一部分，很多的数据还是丢失了。 。所以，以上这种情景并不能还原所有的数。下面，通过第三方工具实现对数据的恢复</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="wt工具恢复mongod数据">WT工具恢复mongod数据<a href="https://book.onlinebookshell.co.in/blog/2023/12/19/mongodb%E6%95%B0%E6%8D%AE%E5%BA%93%E6%81%A2%E5%A4%8D#wt%E5%B7%A5%E5%85%B7%E6%81%A2%E5%A4%8Dmongod%E6%95%B0%E6%8D%AE" class="hash-link" aria-label="WT工具恢复mongod数据的直接链接" title="WT工具恢复mongod数据的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="wt安装">WT安装<a href="https://book.onlinebookshell.co.in/blog/2023/12/19/mongodb%E6%95%B0%E6%8D%AE%E5%BA%93%E6%81%A2%E5%A4%8D#wt%E5%AE%89%E8%A3%85" class="hash-link" aria-label="WT安装的直接链接" title="WT安装的直接链接">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">需要的环境： </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 操作系统:  centos7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> mongod版本: 3.2.17</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>依赖安装</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">yum install -y epel-release libtool automake snappy snappy-devel lz4 lz4-devel zstd zstd-devel libzstd-devel zlib zlib-devel git make vim-common</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>安装源码-需要借助其他工具</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git clone https://github.com/wiredtiger/wiredtiger.git</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>根据所使用的MongoDB版本，应该选择正确的<code>wt</code>分支。例如我当前使用的<code>MongoDB 3.2.17</code>，那么同样应该选择WiredTiger的相应tag MongoDB 3.2.17</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@113 wt]# git tag | grep 3.2.17</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mongodb-3.2.17</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@113 wt]# git checkout tags/mongodb-3.2.17 -b v3.2.17</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="编译源码">编译源码<a href="https://book.onlinebookshell.co.in/blog/2023/12/19/mongodb%E6%95%B0%E6%8D%AE%E5%BA%93%E6%81%A2%E5%A4%8D#%E7%BC%96%E8%AF%91%E6%BA%90%E7%A0%81" class="hash-link" aria-label="编译源码的直接链接" title="编译源码的直接链接">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sh autogen.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./configure --disable-shared --with-builtins=lz4,snappy,zlib,zstd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">make -j $(nproc)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">make install</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="通过wt恢复数据">通过wt恢复数据<a href="https://book.onlinebookshell.co.in/blog/2023/12/19/mongodb%E6%95%B0%E6%8D%AE%E5%BA%93%E6%81%A2%E5%A4%8D#%E9%80%9A%E8%BF%87wt%E6%81%A2%E5%A4%8D%E6%95%B0%E6%8D%AE" class="hash-link" aria-label="通过wt恢复数据的直接链接" title="通过wt恢复数据的直接链接">​</a></h2>
<p>启动Mongodb ，安装mongod参考 yum部署方式</p>
<p>任意创建一个集合，我们将把数据恢复到这个集合中：</p>
<p><img decoding="async" loading="lazy" alt="image-20231220194042182" src="https://book.onlinebookshell.co.in/assets/images/image-20231220194042182-9d06edb5ea181df53e64ee14bbbca105.png" width="1344" height="473" class="img_ev3q"></p>
<p>collection-2-2766252704149925868 即我们要使用的目标文件名。此时应:</p>
<p>81--1313801531657640813.wt : 我们从生产环境出现问题的wt文件中导入到现在的测试环境，然后进行修复</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rm -f   collection-2-2766252704149925868.wt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mv 81--1313801531657640813.wt  collection-2-2766252704149925868.wt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="修复">修复<a href="https://book.onlinebookshell.co.in/blog/2023/12/19/mongodb%E6%95%B0%E6%8D%AE%E5%BA%93%E6%81%A2%E5%A4%8D#%E4%BF%AE%E5%A4%8D" class="hash-link" aria-label="修复的直接链接" title="修复的直接链接">​</a></h3>
<p>让wt帮我们修复文件(非常重要的一步)</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">systemctl  stop mongod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wt salvage file:collection-2-2766252704149925868.wt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chown mongod.mongod collection-2-2766252704149925868.wt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl  start mongod</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>验证数据没有问题后，然后导出数据</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mongoexport --host 127.0.0.1 --port 27017 --db demo --collection restore --out new_alarm20231220out.json --jsonArray</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>在导入到生产环境中去</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mongoimport --host localhost --port 27017 --db sensorcmd  --collection new_alarm --file new_alarm20231220out.json --jsonArray</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="image-20231220194809118" src="https://book.onlinebookshell.co.in/assets/images/image-20231220194809118-e2af97bc61b94ed1b3950daa7259e92f.png" width="1733" height="1059" class="img_ev3q"></p>]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[config-docusaurus-v2]]></title>
        <id>https://book.onlinebookshell.co.in/blog/config-docusaurus-v2</id>
        <link href="https://book.onlinebookshell.co.in/blog/config-docusaurus-v2"/>
        <updated>2023-10-18T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[A short description of this page]]></summary>
        <content type="html"><![CDATA[<p>简单记录一下如何安装和使用 Docusaurus 来构建自己的博客和文档站点。</p>
<blockquote>
<p>Docusaurus 的官方文档 <a href="https://docusaurus.io/zh-CN/docs" target="_blank" rel="noopener noreferrer">https://docusaurus.io/zh-CN/docs</a></p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="生成新站点">生成新站点<a href="https://book.onlinebookshell.co.in/blog/config-docusaurus-v2#%E7%94%9F%E6%88%90%E6%96%B0%E7%AB%99%E7%82%B9" class="hash-link" aria-label="生成新站点的直接链接" title="生成新站点的直接链接">​</a></h2>
<p>使用 <code>classic</code> 模板生成一个新的 Docusaurus 站点 <code>my-website</code>。</p>
<p>运行命令后，经典模板将自动添加到您的项目中</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm init docusaurus@latest my-website classic</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>进入生成的站点目录</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd my-website</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>启动并运行开发服务器:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm run start</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>打开页面 <code>docs/intro.md</code> 并编辑一些行,可以看到该站点会自动重新加载并显示最新的更改。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="配置站点">配置站点<a href="https://book.onlinebookshell.co.in/blog/config-docusaurus-v2#%E9%85%8D%E7%BD%AE%E7%AB%99%E7%82%B9" class="hash-link" aria-label="配置站点的直接链接" title="配置站点的直接链接">​</a></h2>
<p>基础配置</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">docusaurus.config.js</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> config </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Inhere's Site"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">tagline</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Inhere's site, blogs and project docs"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">url</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'https://inhere.github.io'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">baseUrl</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'/'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">trailingSlash</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">organizationName</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'inhere'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Usually your GitHub org/user name.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">projectName</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'inhere.github.io'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Usually your repo name.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">deploymentBranch</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'gh-pages'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>文档和博客配置：</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">docusaurus.config.js</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">presets</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">'classic'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token doc-comment comment" style="color:#999988;font-style:italic">/** </span><span class="token doc-comment comment keyword" style="color:#00009f;font-style:italic">@type</span><span class="token doc-comment comment" style="color:#999988;font-style:italic"> </span><span class="token doc-comment comment class-name punctuation" style="color:#393A34;font-style:italic">{</span><span class="token doc-comment comment class-name keyword" style="color:#00009f;font-style:italic">import</span><span class="token doc-comment comment class-name punctuation" style="color:#393A34;font-style:italic">(</span><span class="token doc-comment comment class-name string" style="color:#e3116c;font-style:italic">'@docusaurus/preset-classic'</span><span class="token doc-comment comment class-name punctuation" style="color:#393A34;font-style:italic">)</span><span class="token doc-comment comment class-name punctuation" style="color:#393A34;font-style:italic">.</span><span class="token doc-comment comment class-name" style="color:#999988;font-style:italic">Options</span><span class="token doc-comment comment class-name punctuation" style="color:#393A34;font-style:italic">}</span><span class="token doc-comment comment" style="color:#999988;font-style:italic"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">docs</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token literal-property property" style="color:#36acaa">sidebarPath</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> require</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'./sidebars.js'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">// Please change this to your repo.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">// Remove this to remove the "edit this page" links.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token literal-property property" style="color:#36acaa">editUrl</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'https://github.com/inhere/inhere.github.io/tree/main/'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">blog</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token literal-property property" style="color:#36acaa">showReadingTime</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token literal-property property" style="color:#36acaa">postsPerPage</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">// routeBasePath: '/', // 把博客放在站点根部</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token literal-property property" style="color:#36acaa">blogSidebarCount</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 默认 5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">// Remove this to remove the "edit this page" links.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token literal-property property" style="color:#36acaa">editUrl</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'https://github.com/inhere/inhere.github.io/tree/main/'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>信息</div><div class="admonitionContent_BuS1"><p>完整配置请看 <a href="https://github.com/inhere/inhere.github.io/blob/main/docusaurus.config.js" target="_blank" rel="noopener noreferrer">https://github.com/inhere/inhere.github.io/blob/main/docusaurus.config.js</a></p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="配置多语言">配置多语言<a href="https://book.onlinebookshell.co.in/blog/config-docusaurus-v2#%E9%85%8D%E7%BD%AE%E5%A4%9A%E8%AF%AD%E8%A8%80" class="hash-link" aria-label="配置多语言的直接链接" title="配置多语言的直接链接">​</a></h3>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">docusaurus.config.js</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token literal-property property" style="color:#36acaa">i18n</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">defaultLocale</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'zh-CN'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">locales</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"zh-CN"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'en'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">localeConfigs</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">en</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">htmlLang</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'en-GB'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>这里我是以 <code>zh-CN</code> 为主，生成 <code>en</code> 翻译文档</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm run write-translations -- --locale en</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="githab-pages">GitHab Pages<a href="https://book.onlinebookshell.co.in/blog/config-docusaurus-v2#githab-pages" class="hash-link" aria-label="GitHab Pages的直接链接" title="GitHab Pages的直接链接">​</a></h2>
<p>参考官方文档添加 GitHab Actions 如下的配置文件，这样在每次推送到仓库时就会触发自动构建，
并且会自动部署构建的静态文件到 <code>gh-pages</code> 分支。</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">.github/workflows/deploy.yml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.github/workflows/test-deploy.yml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="添加常用插件">添加常用插件<a href="https://book.onlinebookshell.co.in/blog/config-docusaurus-v2#%E6%B7%BB%E5%8A%A0%E5%B8%B8%E7%94%A8%E6%8F%92%E4%BB%B6" class="hash-link" aria-label="添加常用插件的直接链接" title="添加常用插件的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="npm2yarn">npm2yarn<a href="https://book.onlinebookshell.co.in/blog/config-docusaurus-v2#npm2yarn" class="hash-link" aria-label="npm2yarn的直接链接" title="npm2yarn的直接链接">​</a></h3>
<p>可以同时显示 npm 和 Yarn 的 CLI 命令。
然后要使用它，只需在代码块中添加 <code>npm2yarn</code> 键：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm install @docusaurus/remark-plugin-npm2yarn</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>配置插件：</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">docusaurus.config.js</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">presets</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">'@docusaurus/preset-classic'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">docs</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">          </span><span class="token literal-property property" style="color:#36acaa">remarkPlugins</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">[</span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'@docusaurus/remark-plugin-npm2yarn'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token literal-property property" style="color:#36acaa">sync</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">pages</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">          </span><span class="token literal-property property" style="color:#36acaa">remarkPlugins</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'@docusaurus/remark-plugin-npm2yarn'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">blog</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="docusaurus-search-local">docusaurus-search-local<a href="https://book.onlinebookshell.co.in/blog/config-docusaurus-v2#docusaurus-search-local" class="hash-link" aria-label="docusaurus-search-local的直接链接" title="docusaurus-search-local的直接链接">​</a></h3>
<p>用于 Docusaurus v2 的支持离线本地搜索的插件</p>
<blockquote>
<p>插件仓库 <a href="https://github.com/easyops-cn/docusaurus-search-local" target="_blank" rel="noopener noreferrer">https://github.com/easyops-cn/docusaurus-search-local</a></p>
</blockquote>
<p>安装插件：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm install --save @easyops-cn/docusaurus-search-local</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>配置插件：</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">docusaurus.config.js</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ... Your other configurations.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">themes</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ... Your other themes.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">      require</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"@easyops-cn/docusaurus-search-local"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// ... Your options.</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// `hashed` is recommended as long-term-cache of index file is possible.</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">hashed</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// For Docs using Chinese, The is recommended to set to:</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">language</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"en"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"zh"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>类似插件：</p>
<ul>
<li><a href="https://github.com/praveenn77/docusaurus-lunr-search" target="_blank" rel="noopener noreferrer">https://github.com/praveenn77/docusaurus-lunr-search</a></li>
<li><a href="https://github.com/cmfcmf/docusaurus-search-local" target="_blank" rel="noopener noreferrer">https://github.com/cmfcmf/docusaurus-search-local</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="openapi-docs">openapi-docs<a href="https://book.onlinebookshell.co.in/blog/config-docusaurus-v2#openapi-docs" class="hash-link" aria-label="openapi-docs的直接链接" title="openapi-docs的直接链接">​</a></h3>
<blockquote>
<p>GitHub <a href="https://github.com/PaloAltoNetworks/docusaurus-openapi-docs" target="_blank" rel="noopener noreferrer">https://github.com/PaloAltoNetworks/docusaurus-openapi-docs</a></p>
</blockquote>
<p>Installation</p>
<p>Plugin:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">yarn add docusaurus-plugin-openapi-docs</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Theme:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">yarn add docusaurus-theme-openapi-docs</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="一些使用说明">一些使用说明<a href="https://book.onlinebookshell.co.in/blog/config-docusaurus-v2#%E4%B8%80%E4%BA%9B%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E" class="hash-link" aria-label="一些使用说明的直接链接" title="一些使用说明的直接链接">​</a></h2>
<p>一些有用的使用说明</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="强调提示">强调提示<a href="https://book.onlinebookshell.co.in/blog/config-docusaurus-v2#%E5%BC%BA%E8%B0%83%E6%8F%90%E7%A4%BA" class="hash-link" aria-label="强调提示的直接链接" title="强调提示的直接链接">​</a></h3>
<div class="language-markdown codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-markdown codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">:::note</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">一些包含 </span><span class="token italic punctuation" style="color:#393A34">_</span><span class="token italic content">Markdown</span><span class="token italic punctuation" style="color:#393A34">_</span><span class="token plain"> </span><span class="token code-snippet code keyword" style="color:#00009f">`语法`</span><span class="token plain"> 的 </span><span class="token bold punctuation" style="color:#393A34">**</span><span class="token bold content">内容</span><span class="token bold punctuation" style="color:#393A34">**</span><span class="token plain">。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:::</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:::tip</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">一些包含 </span><span class="token italic punctuation" style="color:#393A34">_</span><span class="token italic content">Markdown</span><span class="token italic punctuation" style="color:#393A34">_</span><span class="token plain"> </span><span class="token code-snippet code keyword" style="color:#00009f">`语法`</span><span class="token plain"> 的 </span><span class="token bold punctuation" style="color:#393A34">**</span><span class="token bold content">内容</span><span class="token bold punctuation" style="color:#393A34">**</span><span class="token plain">。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:::</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:::info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">一些包含 </span><span class="token italic punctuation" style="color:#393A34">_</span><span class="token italic content">Markdown</span><span class="token italic punctuation" style="color:#393A34">_</span><span class="token plain"> </span><span class="token code-snippet code keyword" style="color:#00009f">`语法`</span><span class="token plain"> 的 </span><span class="token bold punctuation" style="color:#393A34">**</span><span class="token bold content">内容</span><span class="token bold punctuation" style="color:#393A34">**</span><span class="token plain">。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:::</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:::caution</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">一些包含 </span><span class="token italic punctuation" style="color:#393A34">_</span><span class="token italic content">Markdown</span><span class="token italic punctuation" style="color:#393A34">_</span><span class="token plain"> </span><span class="token code-snippet code keyword" style="color:#00009f">`语法`</span><span class="token plain"> 的 </span><span class="token bold punctuation" style="color:#393A34">**</span><span class="token bold content">内容</span><span class="token bold punctuation" style="color:#393A34">**</span><span class="token plain">。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:::</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:::danger</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">一些包含 </span><span class="token italic punctuation" style="color:#393A34">_</span><span class="token italic content">Markdown</span><span class="token italic punctuation" style="color:#393A34">_</span><span class="token plain"> </span><span class="token code-snippet code keyword" style="color:#00009f">`语法`</span><span class="token plain"> 的 </span><span class="token bold punctuation" style="color:#393A34">**</span><span class="token bold content">内容</span><span class="token bold punctuation" style="color:#393A34">**</span><span class="token plain">。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:::</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>效果如下：</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>信息</div><div class="admonitionContent_BuS1"><p>一些包含 <em>Markdown</em> <code>语法</code> 的 <strong>内容</strong>。</p></div></div>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>警告</div><div class="admonitionContent_BuS1"><p>一些包含 <em>Markdown</em> <code>语法</code> 的 <strong>内容</strong>。</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="代码行高亮">代码行高亮<a href="https://book.onlinebookshell.co.in/blog/config-docusaurus-v2#%E4%BB%A3%E7%A0%81%E8%A1%8C%E9%AB%98%E4%BA%AE" class="hash-link" aria-label="代码行高亮的直接链接" title="代码行高亮的直接链接">​</a></h3>
<p>你可以用 <code>highlight-next-line</code>、<code>highlight-start</code>、<code>highlight-end</code> 等注释来选择要高亮的行。</p>
<p>效果如下：</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">HighlightSomeText</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">highlight</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">highlight</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'这行被高亮了！'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'这里不会'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">HighlightMoreText</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">highlight</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">highlight</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'这块被高亮了！'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'这里不会'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>原文档 <a href="https://docusaurus.io/zh-CN/docs/markdown-features/code-blocks#line-highlighting" target="_blank" rel="noopener noreferrer">https://docusaurus.io/zh-CN/docs/markdown-features/code-blocks#line-highlighting</a></p>
</blockquote>]]></content>
        <author>
            <name>zhanglaiqiang</name>
            <uri>https://github.com/shouji1128955/bookshell</uri>
        </author>
        <category label="action" term="action"/>
        <category label="docusaurus" term="docusaurus"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[github结合actions实现自动化部署]]></title>
        <id>https://book.onlinebookshell.co.in/blog/github结合actions实现自动化部署</id>
        <link href="https://book.onlinebookshell.co.in/blog/github结合actions实现自动化部署"/>
        <updated>2023-10-13T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[A short description of this page]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="概述">概述<a href="https://book.onlinebookshell.co.in/blog/github%E7%BB%93%E5%90%88actions%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2#%E6%A6%82%E8%BF%B0" class="hash-link" aria-label="概述的直接链接" title="概述的直接链接">​</a></h2>
<p>笔者之前一直在使用wordpress记录自己工作中的点点滴滴，分享自己的所感所触，但是随着日积月累，发现效率很低，对于管理自己的笔记非常不方便。因为我们有时候都是多种场景，比如，我们工作使用markdown来写作，但是写完之后需要同步到wordpress,这个需要花费很多的时间。特此，笔者通过网友介绍发现facebook旗下的docusaurus非常不错。因为它可以实现通过markdown来写作，然后一键push到github进行项目保存，然后通过github的action来实现一键部署到多种场景,如下图。</p>
<p><img decoding="async" loading="lazy" alt="Example banner" src="https://book.onlinebookshell.co.in/assets/images/1-3c848eeb92b010787975e008ca29295f.png" width="1726" height="868" class="img_ev3q"></p>
<p>当然，也可以部署到自己的服务器。
由于笔者自己测试后，如果部署到github中的page中，由于网络原因，访问速度很慢，尤其加载图片，如果自己买了云服务器，当然可以部署到自己的云服务器中，接下来，我就是使用这种方式来部署自己docusaurus。</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>提示</div><div class="admonitionContent_BuS1"><p>Some <strong>云服务器购买方式---&gt;  推荐购买阿里云，腾讯云的轻量级服务器，费用比较低。</strong></p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1创建action">1、创建action<a href="https://book.onlinebookshell.co.in/blog/github%E7%BB%93%E5%90%88actions%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2#1%E5%88%9B%E5%BB%BAaction" class="hash-link" aria-label="1、创建action的直接链接" title="1、创建action的直接链接">​</a></h2>
<p>下面跟着我一步一步操作如何实现部署，废话不多说，直接上菜。</p>
<p>首先在仓库的根目录下，创建 .github/workflows/main.yml 文件，这就是 GitHub Actions 功能的配置文件，用于告诉 GitHub 要做哪些事情，写入以下内容</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="11-创建action文件">1.1 创建action文件<a href="https://book.onlinebookshell.co.in/blog/github%E7%BB%93%E5%90%88actions%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2#11-%E5%88%9B%E5%BB%BAaction%E6%96%87%E4%BB%B6" class="hash-link" aria-label="1.1 创建action文件的直接链接" title="1.1 创建action文件的直接链接">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">.github/workflows/main.yml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name: Deploy GitHub Pages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 触发条件：在 push 到 master 分支后</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">on:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  push:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    branches:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 任务</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">jobs:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  build-and-deploy:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # 服务器环境：最新版 Ubuntu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    runs-on: ubuntu-latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    steps:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      # 1、拉取代码</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: Checkout</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uses: actions/checkout@v2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        with:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          persist-credentials: false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      # 2、生成静态文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: Build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        run: |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          npm install</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          npm run build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      # 执行 ls -l 命令</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: List files</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        run: ls -l  &amp;&amp; pwd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      # 3、部署到 somenzz.cn 服务器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: rsync deployments</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uses: burnett01/rsync-deployments@4.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        with:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          # 这里是 rsync 的参数 switches: -avzh --delete --exclude="" --include="" --filter=""</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          switches: -avzh  --delete</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          path: ./build/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          remote_path: /apps/liteshell/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          remote_host: xxx.abc.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          remote_port: xxxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          remote_user: root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          remote_key: ${{ secrets.MY_UBUNTU_RSA_PRIVATE_KEY }}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代�码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="12-创建secret私钥文件">1.2 创建secret私钥文件<a href="https://book.onlinebookshell.co.in/blog/github%E7%BB%93%E5%90%88actions%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2#12-%E5%88%9B%E5%BB%BAsecret%E7%A7%81%E9%92%A5%E6%96%87%E4%BB%B6" class="hash-link" aria-label="1.2 创建secret私钥文件的直接链接" title="1.2 创建secret私钥文件的直接链接">​</a></h3>
<p>创建私钥文件</p>
<p>输入 ssh-keygen 只有一路回车</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@110 ~]# ssh-keygen </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Generating public/private rsa key pair.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Enter file in which to save the key (/root/.ssh/id_rsa): </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/root/.ssh/id_rsa already exists.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Overwrite (y/n)? y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Enter passphrase (empty for no passphrase): </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Enter same passphrase again: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Your identification has been saved in /root/.ssh/id_rsa.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Your public key has been saved in /root/.ssh/id_rsa.pub.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The key fingerprint is:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SHA256:ldbpGCcTXoR3ETFCIGM15FFRzpFmkXTOECtgg0VOtgg root@110</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The key's randomart image is:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+---[RSA 2048]----+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|      E +*/*B+%O.|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       o.@.@.=*O |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|        . %.=++ o|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|         o B .   |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|        S . .    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|                 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|                 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|                 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|                 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----[SHA256]-----+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@110 ~]# </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>危险</div><div class="admonitionContent_BuS1"><p>Some <strong>公钥和私钥必须成对，必须保存好公钥和私钥，公钥是需要放到云服务器中，私钥是需要放在github的secret中，否则会出现登录不了的情况</strong></p></div></div>
<p>然后取出公钥</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@110 ~]# cat /root/.ssh/id_rsa.pub  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC2/QQTQyV0YFwbs9wTwJE9S6telGKtL9eTJVPluDQX4vEZq7u72xGLtrmug1Ax9Nxe53tOvIT8y5c5CNydBQssmrSIg57gy8L0Bnk1+J78wGKAawz0xz6ifTGET3XkAlvCesxBs/WkpVuQXcploG3jXwZJdKct7Nz8Y28Rbx0Re+Lgd+zEbqLiWUijdsjFab8mUg9k+5o2QTBU8YZQKyEwQ2etzjuE6mlh+EXepSbendVV4mNFqV/6Iuyy8ppyHkq/6MkPwewRLxm1h0w410YWWYrNJui2disx060PRYYmSAvM3sgfotgZg0wXHtART+v/VB/rmvMQW7qT/ShrEyF7 root@110</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="13实现对公钥上传到云服务器">1.3实现对公钥上传到云服务器<a href="https://book.onlinebookshell.co.in/blog/github%E7%BB%93%E5%90%88actions%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2#13%E5%AE%9E%E7%8E%B0%E5%AF%B9%E5%85%AC%E9%92%A5%E4%B8%8A%E4%BC%A0%E5%88%B0%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8" class="hash-link" aria-label="1.3实现对公钥上传到云服务器的直接链接" title="1.3实现对公钥上传到云服务器的直接链接">​</a></h3>
<p>对于拿出来的公钥实现在服务器授权(需要部署的云服务器)</p>
<ol>
<li>登录云服务器，创建如下文件</li>
</ol>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">touch /root/.ssh/authorized_keys</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">然后把上面的公钥放入到下/root/.ssh/authorized_keys文件中，保存即可</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li>方式2</li>
</ol>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ssh-copy-id -i -P xxxx root@xxx.xx.xx.xx</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2github配置私钥">2、github配置私钥<a href="https://book.onlinebookshell.co.in/blog/github%E7%BB%93%E5%90%88actions%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2#2github%E9%85%8D%E7%BD%AE%E7%A7%81%E9%92%A5" class="hash-link" aria-label="2、github配置私钥的直接链接" title="2、github配置私钥的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="21创建ssh私钥环境变量">2.1、创建ssh私钥环境变量<a href="https://book.onlinebookshell.co.in/blog/github%E7%BB%93%E5%90%88actions%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2#21%E5%88%9B%E5%BB%BAssh%E7%A7%81%E9%92%A5%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F" class="hash-link" aria-label="2.1、创建ssh私钥环境变量的直接链接" title="2.1、创建ssh私钥环境变量的直接链接">​</a></h3>
<p>MY_UBUNTU_RSA_PRIVATE_KEY： SSH私钥文件内容</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">          path: ./build/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          remote_path: /apps/liteshell/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          remote_host: xxx.abc.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          remote_port: xxxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          remote_user: root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          remote_key: ${{ secrets.MY_UBUNTU_RSA_PRIVATE_KEY }}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>需要注意的是，MY_UBUNTU_RSA_PRIVATE_KEY是服务器的s私钥文件。那具体的创建方式如下</p>
<p><img decoding="async" loading="lazy" alt="Example banner" src="https://book.onlinebookshell.co.in/assets/images/2-e67c0c431d328a60958991c025c2990d.png" width="1121" height="508" class="img_ev3q"></p>
<p>然后按照下面的方式进行修改即可</p>
<p><img decoding="async" loading="lazy" alt="Example banner" src="https://book.onlinebookshell.co.in/assets/images/3-42e9722232bd61c2fb7d005b3744de17.png" width="1399" height="643" class="img_ev3q"></p>
<p>然后生成MY_UBUNTU_RSA_PRIVATE_KEY环境变量</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3实现部署">3、实现部署<a href="https://book.onlinebookshell.co.in/blog/github%E7%BB%93%E5%90%88actions%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2#3%E5%AE%9E%E7%8E%B0%E9%83%A8%E7%BD%B2" class="hash-link" aria-label="3、实现部署的直接链接" title="3、实现部署的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="31创建部署目录">3.1、创建部署目录<a href="https://book.onlinebookshell.co.in/blog/github%E7%BB%93%E5%90%88actions%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2#31%E5%88%9B%E5%BB%BA%E9%83%A8%E7%BD%B2%E7%9B%AE%E5%BD%95" class="hash-link" aria-label="3.1、创建部署目录的直接链接" title="3.1、创建部署目录的直接链接">​</a></h3>
<p>登录云服务器创建静态站点</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p /apps/liteshell/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p /var/log/liteshell/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker run -it -d  -p 28080:80  \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--name zlq-nginx-liteshell  -m 400M --memory-reservation 200M  \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--cpus=0.8 -v /apps/liteshell/:/usr/share/nginx/html/ \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-v /var/log/liteshell/:/var/log/nginx/ \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--restart=always  nginx</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="32提交代码">3.2、提交代码<a href="https://book.onlinebookshell.co.in/blog/github%E7%BB%93%E5%90%88actions%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2#32%E6%8F%90%E4%BA%A4%E4%BB%A3%E7%A0%81" class="hash-link" aria-label="3.2、提交代码的直接链接" title="3.2、提交代码的直接链接">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ git add --all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ git commit -m "add article"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ git push</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>然后push到仓库
观察action变化</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="33查看actiong构建过程">3.3、查看actiong构建过程<a href="https://book.onlinebookshell.co.in/blog/github%E7%BB%93%E5%90%88actions%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2#33%E6%9F%A5%E7%9C%8Bactiong%E6%9E%84%E5%BB%BA%E8%BF%87%E7%A8%8B" class="hash-link" aria-label="3.3、查看actiong构建过程的直接链接" title="3.3、查看actiong构建过程的直接链接">​</a></h3>
<p><img decoding="async" loading="lazy" alt="Example banner" src="https://book.onlinebookshell.co.in/assets/images/4-06b58c1c931a0f99d73c230248918ed7.png" width="1894" height="644" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="最后的话">最后的话<a href="https://book.onlinebookshell.co.in/blog/github%E7%BB%93%E5%90%88actions%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2#%E6%9C%80%E5%90%8E%E7%9A%84%E8%AF%9D" class="hash-link" aria-label="最后的话的直接链接" title="最后的话的直接链接">​</a></h2>
<p>GitHub 的 Actions 除了支持 push 触发，也支持 schedule 触发，这就可以玩出很多花样了，比如你可以在仓库中写一个脚本，然后编写 workflow 让 GitHub 每天定时执行，相当于免费获得了服务器的计算资源，可以参考阮一峰老师的文章GitHub Actions 教程：定时发送天气邮件 (opens new window), 对于没有服务器跑定时任务的人来说真的是一大福利。</p>
<p>本文讲述了如何编写 workflow，让 GitHub Actions 自动化部署静态博客，可以让程序员专心的写博客，无需处理重复的部署操作，提升写作效率。在这里抛砖引玉，供各位博客大佬参考使用，不写博客，也可以修改下，变成自己的部署工作流。最后，GitHub Actions 是一个 CI/CD（持续集成/持续部署）工具，值得每一个程序员学习使用。</p>
<p>如果要学习 GitHub Actions 来实现自己的部署流程，以下学习资源供你参考：</p>
<p>GitHub Actions 入门教程 <a href="http://www.ruanyifeng.com/blog/2019/09/getting-started-with-github-actions.html" target="_blank" rel="noopener noreferrer">http://www.ruanyifeng.com/blog/2019/09/getting-started-with-github-actions.html</a> (opens new window)。</p>
<p>GitHub Actions 官方文档 <a href="https://docs.github.com/en/actions" target="_blank" rel="noopener noreferrer">https://docs.github.com/en/actions</a> (opens new window)。</p>
<p>GitHub Actions 官方插件市场<a href="https://github.com/marketplace?type=actions" target="_blank" rel="noopener noreferrer">https://github.com/marketplace?type=actions</a> (opens new window)。</p>
<p>awesome-actions <a href="https://github.com/sdras/awesome-actions" target="_blank" rel="noopener noreferrer">https://github.com/sdras/awesome-actions</a> (opens new window)。</p>
<p>网友博客参考:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">https://somenzz.gitee.io/auto-deploy-blog-by-github-actions.html#_2%E3%80%81secrets-gitee-rsa-private-key</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>蚂蚁大象博客
<a href="https://blog.ljbmxsm.com/docs/others/blog-building/" target="_blank" rel="noopener noreferrer">https://blog.ljbmxsm.com/docs/others/blog-building/</a></p>]]></content>
        <author>
            <name>zhanglaiqiang</name>
            <uri>https://github.com/shouji1128955/bookshell</uri>
        </author>
        <category label="action" term="action"/>
        <category label="docusaurus" term="docusaurus"/>
    </entry>
</feed>