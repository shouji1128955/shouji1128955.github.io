"use strict";(self.webpackChunkbookshell=self.webpackChunkbookshell||[]).push([[8551],{2789:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>d});var r=a(4848),s=a(8453);const l={},t=void 0,i={id:"k8s/helm",title:"helm",description:"\u53c2\u8003\u6587\u6863\uff1a",source:"@site/docs/k8s/3.helm.md",sourceDirName:"k8s",slug:"/k8s/helm",permalink:"/en/docs/k8s/helm",draft:!1,unlisted:!1,editUrl:"https://github.com/shouji1128955/bookshell/edit/main/docs/k8s/3.helm.md",tags:[],version:"current",lastUpdatedBy:"zhanglaiqiang",lastUpdatedAt:172933664e4,sidebarPosition:3,frontMatter:{},sidebar:"k8s",previous:{title:"k8s_studay",permalink:"/en/docs/k8s/k8s_studay"},next:{title:"kubernetes_cka",permalink:"/en/docs/k8s/kubernetes_cka"}},c={},d=[{value:"\u5e38\u89c1\u64cd\u4f5c\u547d\u4ee4",id:"\u5e38\u89c1\u64cd\u4f5c\u547d\u4ee4",level:2},{value:"helm2\u8ddfhelm3\u4e00\u4e9b\u533a\u522b",id:"helm2\u8ddfhelm3\u4e00\u4e9b\u533a\u522b",level:2},{value:"1\u3001release\u5185\u7f6e\u5bf9\u8c61",id:"1release\u5185\u7f6e\u5bf9\u8c61",level:2},{value:"2\u3001values\u6587\u4ef6",id:"2values\u6587\u4ef6",level:2},{value:"3\u3001helm\u6a21\u677f\u51fd\u6570\u4e0e\u7ba1\u9053",id:"3helm\u6a21\u677f\u51fd\u6570\u4e0e\u7ba1\u9053",level:2},{value:"4\u3001helm\u6a21\u677f\u4e4b\u63a7\u5236\u6d41\u7a0b",id:"4helm\u6a21\u677f\u4e4b\u63a7\u5236\u6d41\u7a0b",level:2},{value:"5\u3001helm\u547d\u540d\u6a21\u677f",id:"5helm\u547d\u540d\u6a21\u677f",level:2},{value:"6\u3001helm\u6a21\u677f\u4e4b\u5176\u4ed6\u6ce8\u610f\u4e8b\u9879",id:"6helm\u6a21\u677f\u4e4b\u5176\u4ed6\u6ce8\u610f\u4e8b\u9879",level:2},{value:"7\u3001subcharts\u548c\u5168\u5c40values",id:"7subcharts\u548c\u5168\u5c40values",level:2},{value:"8\u3001witch\u7528\u6cd5",id:"8witch\u7528\u6cd5",level:2},{value:"10\u3001\u7f51\u7edc\u67e5\u9605-upgrade",id:"10\u7f51\u7edc\u67e5\u9605-upgrade",level:2},{value:"11\u3001\u95ee\u9898\u8bb0\u5f55",id:"11\u95ee\u9898\u8bb0\u5f55",level:2}];function m(e){const n={a:"a",code:"code",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"\u53c2\u8003\u6587\u6863\uff1a"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://www.qikqiak.com/k8s-book/",children:"https://www.qikqiak.com/k8s-book/"})}),"\n",(0,r.jsx)(n.h2,{id:"\u5e38\u89c1\u64cd\u4f5c\u547d\u4ee4",children:"\u5e38\u89c1\u64cd\u4f5c\u547d\u4ee4"}),"\n",(0,r.jsx)(n.p,{children:"1\u3001\u62c9\u53d6\u6307\u5b9a\u7248\u672c"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'root@master001:~# helm search repo cilium\r\nNAME           \tCHART VERSION\tAPP VERSION\tDESCRIPTION\r\ncilium/cilium  \t1.15.6       \t1.15.6     \teBPF-based Networking, Security, and Observability\r\ncilium/tetragon\t1.1.2        \t1.1.2      \tHelm chart for Tetragon\r\nroot@master001:~# helm pull cilium/cilium --version="1.15.6"\n'})}),"\n",(0,r.jsx)(n.h2,{id:"helm2\u8ddfhelm3\u4e00\u4e9b\u533a\u522b",children:"helm2\u8ddfhelm3\u4e00\u4e9b\u533a\u522b"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"\u7248\u672c2\u5220\u9664\u4e00\u4e2arelease\u4f7f\u7528\u7684\u547d\u4ee4\r\nhelm delete release-name --purge\r\nhelm  uninstall release-name   [helm3]   --purge#\u4f1a\u4f5c\u4e3a\u4e00\u4e2a\u9ed8\u8ba4\u7684\u884c\u4e3a\r\n\r\n\u7248\u672c3\u5220\u9664\u4e00\u4e2arelease\u4f7f\u7528\u7684\u547d\u4ee4\r\nhelm uninstall release-name   \r\n\r\n\u67e5\u770bchart\u4fe1\u606f\u547d\u4ee4\u53d8\u66f4\r\nhelm  inspect  \r\nhelm show  [helm3]\r\n\r\n\u62c9\u53d6charts\u5305\u547d\u4ee4\u53d8\u66f4\r\nhelm  fetch   \r\nhelm pull    [helm3]\r\n\r\n\u5fc5\u987b\u6307\u5b9arelease\u540d\u79f0\r\nhelm install  \u81ea\u52a8\u751f\u6210\u968f\u673a\u540d\u79f0\r\nhelm install --generate-name  \u5fc5\u987b\u6307\u5b9a\u4e00\u4e2a\u540d\u79f0   [helm3]\r\n\n"})}),"\n",(0,r.jsx)(n.p,{children:"helm3"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"\u5b89\u88c5\r\nhelm install ./tomcat/ --generate-name \r\n\r\n\u66f4\u65b0\r\nhelm upgrade -f ./tomcat/values.yaml  tomcat-1640575223  ./tomcat/ \r\n\r\n\r\nhelm  create  chart\u5305\u540d\u79f0   #\u521b\u5efachart\r\n\r\nhem  get manifest  full-ragdoll  \u67e5\u770b\u6e32\u67d3\u6548\u679c\r\n\r\nhelm install --dry-run  --debug  ./mychart/  \u4e0d\u4f1a\u771f\u6b63\u7684\u5b89\u88c5\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u535a\u5ba22\u5730\u5740"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://huangzhongde.cn/istio/Chapter4.html",children:"https://huangzhongde.cn/istio/Chapter4.html"})}),"\n",(0,r.jsx)(n.p,{children:"\u6dfb\u52a0\u5f15\u53f7:  \u4f7f\u7528quoto"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:'apiVersion: apps/v1\r\nkind: Deployment\r\nmetadata:\r\n  name: {{ .Release.Name }}-configmap\r\n  labels:\r\n    {{- include "tomcat.labels" . | nindent 4 }}\r\n    app: {{ quote .Values.apps.server }}    #quote\u8868\u793a\u6dfb\u52a0\u5f15\u53f7\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u5982\u679c\u5728values\u4e2d\u6ca1\u6709\u503c\uff0c\u6dfb\u52a0\u9ed8\u8ba4\u503c"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:'apiVersion: apps/v1\r\nkind: Deployment\r\nmetadata:\r\n  name: {{ .Release.Name }}-configmap\r\n  labels:\r\n    {{- include "tomcat.labels" . | nindent 4 }}\r\n    app: {{ quote .Values.apps.server }}\r\n    app1: {{ .Values.apps.test  | default "Hello_world" | quote }}  #\u6dfb\u52a0\u9ed8\u8ba4\u503c\u4e3a"hello_world"\r\n\r\n\r\n#\u9a8c\u8bc1\uff1a \r\n# Source: nginx/templates/deployment.yaml\r\napiVersion: apps/v1\r\nkind: Deployment\r\nmetadata:\r\n  name: tomcat-1640577827-configmap\r\n  labels:\r\n    helm.sh/chart: nginx-V1.0\r\n    app: "nginx-test"\r\n    app1: "Hello_world"\r\n\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u5b66\u4e60\u6a21\u677f"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://pkg.go.dev/text/template",children:"https://pkg.go.dev/text/template"})}),"\n",(0,r.jsx)(n.p,{children:"\u6d41\u7a0b\u63a7\u5236\u8bed\u53e5if\u4ee5\u53ca\u5220\u9664\u7a7a\u683c\u884c\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:'\r\napiVersion: apps/v1\r\nkind: Deployment\r\nmetadata:\r\n  name: {{ .Release.Name }}-configmap\r\n  labels:\r\n    {{- include "tomcat.labels" . | nindent 4 }}\r\n    app: {{ quote .Values.apps.server }}\r\n    app1: {{ .Values.apps.test  | default "Hello_world" | quote }}\r\n    {{- if eq .Values.apps.python "django" }}   #\u5728if\u524d\u9762\u52a0-\u8868\u793a\u5220\u9664\u7a7a\u884c\r\n    web: truefsd\r\n    {{- end }}    \r\n\r\n\r\n#\u4e0d\u8fd0\u884c\uff0c\u6e32\u67d3\u6548\u679c\r\nhelm upgrade -f ./tomcat/values.yaml  tomcat-1640577827 ./tomcat/   --dry-run\n'})}),"\n",(0,r.jsx)(n.p,{children:"with\u8bed\u53e5"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:'apiVersion: apps/v1\r\nkind: Deployment\r\nmetadata:\r\n  name: {{ .Release.Name }}-configmap\r\n  labels:\r\n    {{- include "tomcat.labels" . | nindent 4 }}\r\n\r\n    {{- with .Values.apps }}                 #with\u8bed\u53e5\u8303\u56f4\u7b2c\u4e00\u884c\r\n    app: {{ quote .server }}\r\n    app1: {{ .test  | default "Hello_world" | quote }}\r\n    {{- if eq .python "django" }}\r\n    web: truefsd\r\n    {{- end }}\r\n    {{- end }}                               #with\u8bed\u53e5\u63a7\u5236\u8303\u56f4\u6700\u540e\u4e00\u884c\n'})}),"\n",(0,r.jsx)(n.h2,{id:"1release\u5185\u7f6e\u5bf9\u8c61",children:"1\u3001release\u5185\u7f6e\u5bf9\u8c61"}),"\n",(0,r.jsx)(n.p,{children:"\u5bf9\u8c61\u4ece\u6a21\u677f\u5f15\u64ce\u4f20\u9012\u5230\u6a21\u677f\u4e2d\u3002 \u800c\u4e14\u4f60\u7684\u4ee3\u7801\u53ef\u4ee5\u4f20\u9012\u5bf9\u8c61\uff08\u5f53\u6211\u4eec\u770b\u5230with\u548crange\u8bed\u53e5\u65f6\uff0c\u6211\u4eec\u4f1a\u770b\u5230\u4e00\u4e9b\u4f8b\u5b50\uff09\u3002 \u751a\u81f3\u6709\u51e0\u79cd\u65b9\u6cd5\u53ef\u4ee5\u5728\u4f60\u7684\u6a21\u677f\u4e2d\u521b\u5efa\u65b0\u7684\u5bf9\u8c61\uff0c\u6bd4\u5982\u6211\u4eec\u7a0d\u540e\u4f1a\u770b\u5230\u7684tuple\u51fd\u6570\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u5bf9\u8c61\u53ef\u4ee5\u5f88\u7b80\u5355\uff0c\u53ea\u6709\u4e00\u4e2avalues\u3002 \u6216\u8005\u4ed6\u4eec\u53ef\u4ee5\u5305\u542b\u5176\u4ed6\u5bf9\u8c61\u6216\u529f\u80fd\u3002 \u4f8b\u5982\u3002 Release\u5bf9\u8c61\u5305\u542b\u591a\u4e2a\u5bf9\u8c61\uff08\u5982Release.Name\uff09\uff0c\u800cFiles\u5bf9\u8c61\u6709\u51e0\u4e2a\u529f\u80fd\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"\u5728\u4e0a\u4e00\u8282\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528{{.Release.Name}}\u5c06\u7248\u672c\u7684\u540d\u79f0\u63d2\u5165\u5230\u6a21\u677f\u4e2d\u3002 Release\u662f\u60a8\u53ef\u4ee5\u5728\u6a21\u677f\u4e2d\u8bbf\u95ee\u7684\u9876\u7ea7\u5bf9\u8c61\u4e4b\u4e00\u3002\r\n- Release: \u8fd9\u4e2a\u5bf9\u8c61\u63cf\u8ff0\u4e86\u8fd9\u4e2arelease\u672c\u8eab\u3002 \u5b83\u91cc\u9762\u6709\u51e0\u4e2a\u5bf9\u8c61\uff1a\r\n  - Release.Name: release\u7684\u540d\u79f0\r\n  - Release.Time: \u53d1\u5e03\u7684\u65f6\u95f4\r\n  - Release.Namespace: release\u7684\u7248\u672c(\u5982\u679c\u58f0\u660e\u4e2d\u672a\u8986\u76d6)\r\n  - Release.Service: Release service\u7684\u540d\u79f0\uff08\u901a\u5e38\u4e3aTiller\uff09\u3002\r\n  - Release.Revision: \u6b64release\u7684\u4fee\u8ba2\u7248\u53f7\u3002 \u5b83\u4ece1\u5f00\u59cb\uff0c\u6bcf\u8c03\u7528\u4e00\u6b21helm upgrade\u90fd\u4f1a\u589e\u52a0\r\n  - Release.IsUpgrade: \u5982\u679c\u5f53\u524d\u64cd\u4f5c\u662fupgrade\u6216rollback\uff0c\u5219\u8bbe\u7f6e\u4e3atrue\u3002\r\n  - Release.IsInstall: \u5982\u679c\u5f53\u524d\u64cd\u4f5c\u662finstall\uff0c\u5219\u8bbe\u7f6e\u4e3atrue\u3002\r\n- Values: values\u4ecevalues.yaml\u6587\u4ef6\u548c\u7528\u6237\u63d0\u4f9b\u7684\u6587\u4ef6\u4f20\u9012\u5230\u6a21\u677f\u4e2d\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u503c\u4e3a\u7a7a\u3002\r\n- Chart: Chart.yaml\u6587\u4ef6\u7684\u5185\u5bb9\u3002 Chart.yaml\u4e2d\u7684\u4efb\u4f55\u6570\u636e\u90fd\u53ef\u4ee5\u5728\u8fd9\u91cc\u8bbf\u95ee\u3002 \u4f8b\u5982{{.Chart.Name}} - {{.Chart.Version}}\u5c06\u6253\u5370\u51famychart-0.1.0\r\n  - [chart\u6307\u5357](https://www.bookstack.cn/read/study-helm/charts-charts.md)\u4e2d\u5217\u51fa\u4e86\u53ef\u7528\u5b57\u6bb5\r\n- Files: \u8fd9\u63d0\u4f9b\u4e86\u5bf9chat\u4e2d\u6240\u6709\u975e\u7279\u6b8a\u6587\u4ef6\u7684\u8bbf\u95ee\u3002 \u867d\u7136\u60a8\u65e0\u6cd5\u4f7f\u7528\u5b83\u6765\u8bbf\u95ee\u6a21\u677f\uff0c\u4f46\u60a8\u53ef\u4ee5\u4f7f\u7528\u5b83\u6765\u8bbf\u95eechart\u4e2d\u7684\u5176\u4ed6\u6587\u4ef6\u3002\r\n  - Files.Get: \u662f\u4e00\u4e2a\u6309\u540d\u79f0\u83b7\u53d6\u6587\u4ef6\u7684\u51fd\u6570\uff08.Files.Get config.ini\uff09\r\n  - Files.GetBytes: \u662f\u5c06\u6587\u4ef6\u5185\u5bb9\u4f5c\u4e3a\u5b57\u8282\u6570\u7ec4\u800c\u4e0d\u662f\u5b57\u7b26\u4e32\u83b7\u53d6\u7684\u51fd\u6570\u3002 \u8fd9\u5bf9\u50cfchart\u8fd9\u6837\u7684\u4e1c\u897f\u5f88\u6709\u7528\u3002\r\n- Capabilities: \u8fd9\u63d0\u4f9b\u4e86\u5173\u4e8eKubernetes\u96c6\u7fa4\u652f\u6301\u54ea\u4e9b\u529f\u80fd\u7684\u4fe1\u606f\u3002\r\n  - Capabilities.APIVersions: \u662f\u4e00\u7ec4\u7248\u672c\u53f7\r\n  - Capabilities.APIVersions.Has $version: \u6307\u793a\u662f\u5426\u5728\u7fa4\u96c6\u4e0a\u542f\u7528\u7248\u672c\uff08batch / v1\uff09\r\n  - Capabilities.KubeVersion: \u63d0\u4f9b\u4e86\u67e5\u627eKubernetes\u7248\u672c\u7684\u65b9\u6cd5\u3002 \u5b83\u5177\u6709\u4ee5\u4e0b\u503c\uff1aMajor\uff0cMinor\uff0cGitVersion\uff0cGitCommit\uff0cGitTreeState\uff0cBuildDate\uff0cGoVersion\uff0cCompiler\u548cPlatform\u3002\r\n  - Capabilities.TillerVersion: \u63d0\u4f9b\u4e86\u67e5\u627eTiller\u7248\u672c\u7684\u65b9\u6cd5\u3002 \u5b83\u5177\u6709\u4ee5\u4e0b\u503c\uff1aSemVer\uff0cGitCommit\u548cGitTreeState\u3002\r\n- Template: \u5305\u542b\u6709\u5173\u6b63\u5728\u6267\u884c\u7684\u5f53\u524d\u6a21\u677f\u7684\u4fe1\u606f\r\n  - Name: \u5230\u5f53\u524d\u6a21\u677f\u7684namespace\u6587\u4ef6\u8def\u5f84\uff08\u4f8b\u5982mychart/templates/mytemplate.yaml\uff09\r\n  - BasePath: \u5f53\u524dchart\u6a21\u677f\u76ee\u5f55\u7684namespace\u8def\u5f84\uff08\u4f8b\u5982mychart/templates\uff09\u3002\r\n\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u8fd9\u4e9b\u503c\u53ef\u7528\u4e8e\u4efb\u4f55\u9876\u7ea7\u6a21\u677f\u3002 \u6211\u4eec\u7a0d\u540e\u4f1a\u770b\u5230\uff0c\u8fd9\u5e76\u4e0d\u4e00\u5b9a\u610f\u5473\u7740\u5b83\u4eec\u5c06\u5728\u4efb\u4f55\u5730\u65b9\u90fd\u53ef\u7528\u3002"}),"\n",(0,r.jsxs)(n.p,{children:["\u5185\u7f6eValues\u59cb\u7ec8\u4ee5\u5927\u5199\u5b57\u6bcd\u5f00\u5934\u3002 \u8fd9\u7b26\u5408Go\u7684\u547d\u540d\u7ea6\u5b9a\u3002 \u5f53\u4f60\u521b\u5efa\u81ea\u5df1\u7684name\u65f6\uff0c\u4f60\u53ef\u4ee5\u81ea\u7531\u5730\u4f7f\u7528\u9002\u5408\u4f60\u7684\u56e2\u961f\u7684\u60ef\u4f8b\u3002 \u4e00\u4e9b\u56e2\u961f\uff0c\u5982",(0,r.jsx)(n.a,{href:"https://github.com/kubernetes/charts",children:"Kubernetes chart"}),"\u56e2\u961f\uff0c\u9009\u62e9\u4ec5\u4f7f\u7528\u9996\u5b57\u6bcd\u5c0f\u5199\u6765\u533a\u5206\u672c\u5730\u540d\u79f0\u4e0e\u5185\u7f6e\u540d\u79f0\u3002 \u5728\u672c\u6307\u5357\u4e2d\uff0c\u6211\u4eec\u9075\u5faa\u8be5\u7ea6\u5b9a\u3002"]}),"\n",(0,r.jsx)(n.h2,{id:"2values\u6587\u4ef6",children:"2\u3001values\u6587\u4ef6"}),"\n",(0,r.jsx)(n.p,{children:"\u6211\u4eec\u770b\u4e86Helm\u6a21\u677f\u63d0\u4f9b\u7684\u5185\u7f6e\u5bf9\u8c61\u3002Values\u662f\u56db\u4e2a\u5185\u7f6e\u5bf9\u8c61\u4e4b\u4e00\u3002 \u8be5\u5bf9\u8c61\u63d0\u4f9b\u5bf9\u4f20\u5165chart\u7684values\u7684\u8bbf\u95ee\u3002 \u5176\u5185\u5bb9\u6765\u81ea\u56db\u4e2a\u6765\u6e90\uff1a"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"chart\u4e2d\u7684values.yaml\u6587\u4ef6"}),"\n",(0,r.jsx)(n.li,{children:"\u5982\u679c\u8fd9\u662f\u4e00\u4e2a\u5b50chart\uff0c\u6765\u81ea\u7236chart\u7684values.yaml\u6587\u4ef6"}),"\n",(0,r.jsx)(n.li,{children:"Values\u6587\u4ef6\u5982\u679c\u901a\u8fc7-f\u6807\u5fd7\u4f20\u9012\u7ed9helm install\u6216helm update\uff08helm install -f myvals.yaml ./mychart\uff09"}),"\n",(0,r.jsx)(n.li,{children:"\u4e2a\u522b\u53c2\u6570\u901a\u8fc7\u2014set\u8bbe\u7f6e\uff08\u4f8b\u5982helm install \u2014set foo = bar ./mychart\uff09"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u4e0a\u9762\u7684\u5217\u8868\u6309\u7167\u7279\u5b9a\u7684\u987a\u5e8f\u6392\u5217\uff1avalues.yaml\u662f\u9ed8\u8ba4\u503c\uff0c\u53ef\u4ee5\u7531\u7236chart\u7684values.yaml\u8986\u76d6\uff0c\u800c\u8fd9\u4e9bvalues\u53ef\u4ee5\u88ab\u7528\u6237\u63d0\u4f9b\u7684values\u6587\u4ef6\u8986\u76d6\uff0c\u800c\u8fd9\u4e9b\u503c\u53c8\u53ef\u4ee5\u88ab\u2014set\u53c2\u6570\u8986\u76d6\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u9ed8\u8ba4\u7684values.yaml\u4e2d\u7684\u503c\u4f1a\u88ab-f \u6307\u5b9a\u7684\u6587\u4ef6\u6240\u8986\u76d6"}),"\n",(0,r.jsx)(n.p,{children:"1\u3001\u521b\u5efachart\u5305"}),"\n",(0,r.jsx)(n.p,{children:"helm create mychart"}),"\n",(0,r.jsx)(n.p,{children:"\u521b\u5efa\u6587\u4ef6"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:'root@k8s-master-cms-test:/data/helm-charts/iandun-api# cat ./mychart/templates/configmap.yaml \r\napiVersion: v1\r\nkind: ConfigMap\r\nmetadata:\r\n  name: mychart-configmap\r\ndata: \r\n  myvalue: "hello,world"\r\n\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u6d4b\u8bd5"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:'root@k8s-master-cms-test:/data/helm-charts/iandun-api# helm install test --dry-run  ./mychart/\r\nNAME: test\r\nLAST DEPLOYED: Wed Oct 12 10:16:30 2022\r\nNAMESPACE: default\r\nSTATUS: pending-install\r\nREVISION: 1\r\nTEST SUITE: None\r\nHOOKS:\r\nMANIFEST:\r\n---\r\n# Source: mychart/templates/configmap.yaml\r\napiVersion: v1\r\nkind: ConfigMap\r\nmetadata:\r\n  name: mychart-configmap\r\ndata: \r\n  myvalue: "hello,world"\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u53ef\u4ee5\u901a\u8fc7helm get manifest  release_name\u53ef\u4ee5\u67e5\u770b\u5177\u4f53\u7684\u6e32\u67d3\u6587\u4ef6"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:'root@k8s-master-cms-test:/data/helm-charts/iandun-api# helm get manifest mychart \r\n---\r\n# Source: mychart/templates/configmap.yaml\r\napiVersion: v1\r\nkind: ConfigMap\r\nmetadata:\r\n  name: mychart-configmap\r\ndata: \r\n  myvalue: "hello,world"\r\n\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u6ce8\u610f\uff1a \u4f7f\u7528helm  delete  release_name \u53ef\u80fd\u4e0d\u80fd\u76f4\u63a5\u5220\u9664"}),"\n",(0,r.jsx)(n.p,{children:"\u901a\u8fc7 helm ls  --all\u67e5\u770b\u6240\u6709\u7684\uff0c\u770b\u5220\u9664\u7684\u662f\u5426\u5b58\u5728"}),"\n",(0,r.jsx)(n.p,{children:"helm delete    release-name  --purge  \u5f7b\u5e95\u5220\u9664"}),"\n",(0,r.jsx)(n.p,{children:"helm3 \u7248\u672c\u4ee5\u540e\u6ca1\u6709\u4e86\u6b64\u95ee\u9898"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:'root@k8s-master-cms-test:/data/helm-charts/iandun-api# helm delete mychart \r\nrelease "mychart" uninstalled\r\nroot@k8s-master-cms-test:/data/helm-charts/iandun-api# helm list --all\r\nNAME\tNAMESPACE\tREVISION\tUPDATED\tSTATUS\tCHART\tAPP VERSION\r\nroot@k8s-master-cms-test:/data/helm-charts/iandun-api# helm list --all\r\nNAME\tNAMESPACE\tREVISION\tUPDATED\tSTATUS\tCHART\tAPP VERSION\n'})}),"\n",(0,r.jsx)(n.p,{children:"2\u3001configmap\u540d\u79f0\u66f4\u6362\u4e3arelease-name\u540d\u79f0"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:'root@k8s-master-cms-test:/data/helm-charts/iandun-api# cat mychart/templates/configmap.yaml  \r\napiVersion: v1\r\nkind: ConfigMap\r\nmetadata:\r\n  name: {{ .Release.Name }}-configmap\r\ndata: \r\n  myvalue: "hello,world"\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u9a8c\u8bc1\u9009\u7136\u540e\u7ed3\u679c"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'root@k8s-master-cms-test:/data/helm-charts/iandun-api# helm install test-mychart --dry-run  ./mychart/\r\nNAME: test-mychart\r\nLAST DEPLOYED: Wed Oct 12 10:25:41 2022\r\nNAMESPACE: default\r\nSTATUS: pending-install\r\nREVISION: 1\r\nTEST SUITE: None\r\nHOOKS:\r\nMANIFEST:\r\n---\r\n# Source: mychart/templates/configmap.yaml\r\napiVersion: v1\r\nkind: ConfigMap\r\nmetadata:\r\n  name: test-mychart-configmap  ##\u6e32\u67d3\u540e\u540d\u79f0\u53d8\u6389\r\ndata: \r\n  myvalue: "hello,world"\n'})}),"\n",(0,r.jsx)(n.p,{children:"3\u3001values\u503c"}),"\n",(0,r.jsx)(n.p,{children:"\u5220\u9664\u539f\u6709\u7684values\u503c"}),"\n",(0,r.jsx)(n.p,{children:"\u4fee\u6539\u5982\u4e0b:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"root@k8s-master-cms-test:/data/helm-charts/iandun-api# cat mychart/values.yaml \r\nfavorite: \r\n  drink: coffee\r\n  food: pizza\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u4fee\u6539\u5982\u4e0b\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"root@k8s-master-cms-test:/data/helm-charts/iandun-api# cat  mychart/templates/configmap.yaml \r\napiVersion: v1\r\nkind: ConfigMap\r\nmetadata:\r\n  name: {{ .Release.Name }}-configmap\r\ndata: \r\n  myvale: {{ .Release.Name }}\r\n  drink: {{ .Values.favorite.drink }}\r\n  food: {{ .Values.favorite.food }}\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u9a8c\u8bc1\u6e32\u67d3\u6548\u679c\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"root@k8s-master-cms-test:/data/helm-charts/iandun-api# helm install test-mychart --dry-run  ./mychart/\r\nNAME: test-mychart\r\nLAST DEPLOYED: Wed Oct 12 11:13:14 2022\r\nNAMESPACE: default\r\nSTATUS: pending-install\r\nREVISION: 1\r\nTEST SUITE: None\r\nHOOKS:\r\nMANIFEST:\r\n---\r\n# Source: mychart/templates/configmap.yaml\r\napiVersion: v1\r\nkind: ConfigMap\r\nmetadata:\r\n  name: test-mychart-configmap\r\ndata: \r\n  myvale: test-mychart\r\n  drink: coffee\r\n  food: pizza\n"})}),"\n",(0,r.jsx)(n.h2,{id:"3helm\u6a21\u677f\u51fd\u6570\u4e0e\u7ba1\u9053",children:"3\u3001helm\u6a21\u677f\u51fd\u6570\u4e0e\u7ba1\u9053"}),"\n",(0,r.jsx)(n.p,{children:"1\u3001\u53cc\u5f15\u53f7\uff1a \u5173\u952e\u8bcd quote"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"root@k8s-master-cms-test:/data/helm-charts/iandun-api# cat mychart/templates/configmap.yaml \r\napiVersion: v1\r\nkind: ConfigMap\r\nmetadata:\r\n  name: {{ .Release.Name }}-configmap\r\ndata: \r\n  myvale: {{ .Release.Name }}\r\n  drink: {{ quote .Values.favorite.drink }}\r\n  food: {{ .Values.favorite.food }}\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u7136\u540e\u8fdb\u884c\u6e32\u67d3\uff0c\u6dfb\u52a0\u53cc\u5f15\u53f7"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'\r\nroot@k8s-master-cms-test:/data/helm-charts/iandun-api# helm install test-mychart --dry-run  ./mychart/\r\nNAME: test-mychart\r\nLAST DEPLOYED: Wed Oct 12 11:21:47 2022\r\nNAMESPACE: default\r\nSTATUS: pending-install\r\nREVISION: 1\r\nTEST SUITE: None\r\nHOOKS:\r\nMANIFEST:\r\n---\r\n# Source: mychart/templates/configmap.yaml\r\napiVersion: v1\r\nkind: ConfigMap\r\nmetadata:\r\n  name: test-mychart-configmap\r\ndata: \r\n  myvale: test-mychart\r\n  drink: "coffee"\r\n  food: pizza\r\n\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Helm\u62e5\u6709\u8d85\u8fc760\u79cd\u53ef\u7528\u529f\u80fd\u3002 \u5176\u4e2d\u4e00\u4e9b\u662f\u7531",(0,r.jsx)(n.a,{href:"https://godoc.org/text/template",children:"Go\u6a21\u677f\u8bed\u8a00"}),"\u672c\u8eab\u5b9a\u4e49\u7684\u3002 \u5176\u4ed6\u5927\u591a\u6570\u90fd\u662f",(0,r.jsx)(n.a,{href:"https://godoc.org/github.com/Masterminds/sprig",children:"Sprig\u6a21\u677f\u5e93"}),"\u7684\u4e00\u90e8\u5206\u3002 \u5728\u6211\u4eec\u901a\u8fc7\u4f8b\u5b50\u8fdb\u884c\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u4f1a\u770b\u5230\u5176\u4e2d\u7684\u5f88\u591a\u3002"]}),"\n",(0,r.jsx)(n.p,{children:"\u65b9\u5f0f2\uff0c\u4ee5\u4e0a\u65b9\u5f0f\u901a\u8fc7\u7ba1\u9053\u7684\u65b9\u5f0f\u5b9e\u73b0"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"root@k8s-master-cms-test:/data/helm-charts/iandun-api# cat mychart/templates/configmap.yaml \r\napiVersion: v1\r\nkind: ConfigMap\r\nmetadata:\r\n  name: {{ .Release.Name }}-configmap\r\ndata: \r\n  myvale: {{ .Release.Name }}\r\n  drink: {{ .Values.favorite.drink | quote }}  ###\u53c2\u8003\u4fee\u6539 \r\n  food: {{ .Values.favorite.food }}\n"})}),"\n",(0,r.jsx)(n.p,{children:"3\u3001\u8f6c\u6210\u5927\u5199\u5b57\u7b26  -upper"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"root@k8s-master-cms-test:/data/helm-charts/iandun-api# cat mychart/templates/configmap.yaml \r\napiVersion: v1\r\nkind: ConfigMap\r\nmetadata:\r\n  name: {{ .Release.Name }}-configmap\r\ndata: \r\n  myvale: {{ .Release.Name }}\r\n  drink: {{ .Values.favorite.drink | quote | upper }}  ###\u53c2\u8003\u4fee\u6539 \r\n  food: {{ .Values.favorite.food }}\n"})}),"\n",(0,r.jsx)(n.p,{children:"4\u3001\u5b57\u7b26\u4e32\u91cd\u590d\u4e09\u6b21-repeat"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"drink: {{ .Values.favorite.drink | repeat 3 | quote }}  ###\u53c2\u8003\u4fee\u6539 \n"})}),"\n",(0,r.jsx)(n.p,{children:"\u7ba1\u9053\u90fd\u662f\u6709\u987a\u5e8f\u7684\uff0c\u4ece\u524d\u5f80\u540e"}),"\n",(0,r.jsx)(n.p,{children:"5\u3001\u4f7f\u7528DEFUALT\u529f\u80fd\uff1a -defalut"}),"\n",(0,r.jsx)(n.p,{children:"\u5982\u679cvalues\u4e2d\u4e0d\u5b58\u5728\uff0c\u53ef\u4ee5\u4f7f\u7528default"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'drink: {{ .Values.favorite.support | default "run" }}  ###\u53c2\u8003\u4fee\u6539 \r\n\n'})}),"\n",(0,r.jsx)(n.h2,{id:"4helm\u6a21\u677f\u4e4b\u63a7\u5236\u6d41\u7a0b",children:"4\u3001helm\u6a21\u677f\u4e4b\u63a7\u5236\u6d41\u7a0b"}),"\n",(0,r.jsx)(n.p,{children:"\u63a7\u5236\u7ed3\u6784\uff08\u6a21\u677f\u8bf4\u6cd5\u4e2d\u79f0\u4e3a\u201c\u64cd\u4f5c\u201d\uff09\u4e3a\u6a21\u677f\u4f5c\u8005\u63d0\u4f9b\u4e86\u63a7\u5236\u6a21\u677f\u751f\u6210\u6d41\u7a0b\u7684\u80fd\u529b\u3002 Helm\u7684\u6a21\u677f\u8bed\u8a00\u63d0\u4f9b\u4e86\u4ee5\u4e0b\u63a7\u5236\u7ed3\u6784\uff1a"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"if"}),"/`else: \u7528\u4e8e\u521b\u5efa\u6761\u4ef6\u5757"]}),"\n",(0,r.jsx)(n.li,{children:"with: \u6307\u5b9a\u8303\u56f4"}),"\n",(0,r.jsx)(n.li,{children:"range: \u5b83\u63d0\u4f9b\u4e86\u201cfor-each\u201d\u98ce\u683c\u7684\u5faa\u73af"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u9664\u6b64\u4e4b\u5916\uff0c\u5b83\u8fd8\u63d0\u4f9b\u4e86\u4e00\u4e9b\u58f0\u660e\u548c\u4f7f\u7528\u547d\u540d\u6a21\u677f\u6bb5\u7684\u64cd\u4f5c\uff1a"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"define: \u5728\u6a21\u677f\u4e2d\u58f0\u660e\u4e00\u4e2a\u65b0\u7684\u547d\u540d\u6a21\u677f"}),"\n",(0,r.jsx)(n.li,{children:"template: \u5bfc\u5165\u4e00\u4e2aNamed\u6a21\u677f"}),"\n",(0,r.jsx)(n.li,{children:"block: \u58f0\u660e\u4e86\u4e00\u79cd\u7279\u6b8a\u7684\u53ef\u586b\u5199\u6a21\u677f\u533a\u57df"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u5728\u672c\u8282\u4e2d\uff0c\u6211\u4eec\u5c06\u8ba8\u8bbaif\uff0cwith\u548crange\u3002 \u5176\u4ed6\u5185\u5bb9\u5728\u672c\u6307\u5357\u540e\u9762\u7684\u201cNamed\u6a21\u677f\u201d\u4e00\u8282\u4e2d\u4ecb\u7ecd\u3002"}),"\n",(0,r.jsx)(n.p,{children:"IF/ELSE"}),"\n",(0,r.jsx)(n.p,{children:"\u6211\u4eec\u8981\u770b\u7684\u7b2c\u4e00\u4e2a\u63a7\u5236\u7ed3\u6784\u662f\u7528\u4e8e\u5728\u6a21\u677f\u4e2d\u6709\u6761\u4ef6\u5730\u5305\u542b\u6587\u672c\u5757\u3002 \u8fd9\u662fif/else\u5757\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u6761\u4ef6\u7684\u57fa\u672c\u7ed3\u6784\u5982\u4e0b\u6240\u793a\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"{{ if PIPELINE }}  \r\n# Do something{{ else if OTHER PIPELINE }}  \r\n# Do something else{{ else }}  # Default case{{ end }}\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u8bf7\u6ce8\u610f\uff0c\u6211\u4eec\u73b0\u5728\u8ba8\u8bba\u7684\u662f\u7ba1\u9053\u800c\u4e0d\u662fvalues\u3002 \u5176\u539f\u56e0\u662f\u8981\u660e\u786e\u63a7\u5236\u7ed3\u6784\u53ef\u4ee5\u6267\u884c\u6574\u4e2a\u7ba1\u9053\uff0c\u800c\u4e0d\u4ec5\u4ec5\u662f\u8bc4\u4f30\u4e00\u4e2avalues\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u5982\u679cvalues\u662f\u4ee5\u4e0b\u5185\u5bb9\uff0c\u5219\u7ba1\u9053\u8bc4\u4f30\u4e3afalse:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u4e00\u4e2a\u4e3afalse\u7684\u5e03\u5c14\u503c"}),"\n",(0,r.jsx)(n.li,{children:"\u4e00\u4e2a\u4e3a0\u7684\u6570\u5b57"}),"\n",(0,r.jsx)(n.li,{children:"\u4e00\u4e2a\u7a7a\u5b57\u7b26\u4e32"}),"\n",(0,r.jsx)(n.li,{children:"nil(empty\u6216\u8005null)"}),"\n",(0,r.jsxs)(n.li,{children:["\u4e00\u4e2a\u7a7a\u96c6\u5408(",(0,r.jsx)(n.code,{children:"map"}),", ",(0,r.jsx)(n.code,{children:"slice"}),", ",(0,r.jsx)(n.code,{children:"tuple"}),", ",(0,r.jsx)(n.code,{children:"dict"}),", ",(0,r.jsx)(n.code,{children:"array"}),")"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u8ba9\u6211\u4eec\u4e3aConfigMap\u6dfb\u52a0\u4e00\u4e2a\u7b80\u5355\u7684\u6761\u4ef6\u3002 \u5982\u679cdrink\u88ab\u8bbe\u7f6e\u4e3acoffee\uff0c\u6211\u4eec\u5c06\u6dfb\u52a0\u53e6\u4e00\u4e2a\u8bbe\u7f6e\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'root@k8s-master-cms-test:/data/helm-charts/iandun-api# cat mychart/templates/configmap.yaml\r\napiVersion: v1\r\nkind: ConfigMap\r\nmetadata:\r\n  name: {{ .Release.Name }}-configmap\r\ndata: \r\n  myvale: {{ .Release.Name }}\r\n  drink: {{ quote .Values.favorite.drink }}\r\n  food: {{ .Values.favorite.food }}\r\n  {{ if eq .Values.favorite.drink "coffee" }}mug: true {{ end }}\r\n\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u7531\u4e8e\u6211\u4eec\u5728\u6700\u540e\u4e00\u4e2a\u4f8b\u5b50\u4e2d\u6ce8\u5165\u4e86drink\uff1acoffee\uff0c\u6240\u4ee5\u8f93\u51fa\u4e0d\u5e94\u8be5\u5305\u62ecmug\uff1atrue; \u4f46\u662f\uff0c\u5982\u679c\u6211\u4eec\u5c06\u8be5\u884c\u6dfb\u52a0\u5230\u6211\u4eec\u7684values.yaml\u6587\u4ef6\u4e2d\uff0c\u5219\u8f93\u51fa\u5e94\u5982\u4e0b\u6240\u793a\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'root@k8s-master-cms-test:/data/helm-charts/iandun-api# helm install test-mychart --dry-run  ./mychart/\r\nNAME: test-mychart\r\nLAST DEPLOYED: Wed Oct 12 12:01:55 2022\r\nNAMESPACE: default\r\nSTATUS: pending-install\r\nREVISION: 1\r\nTEST SUITE: None\r\nHOOKS:\r\nMANIFEST:\r\n---\r\n# Source: mychart/templates/configmap.yaml\r\napiVersion: v1\r\nkind: ConfigMap\r\nmetadata:\r\n  name: test-mychart-configmap\r\ndata: \r\n  myvale: test-mychart\r\n  drink: "coffee"\r\n  food: pizza\r\n  mug: true\r\n\n'})}),"\n",(0,r.jsx)(n.p,{children:"2\u3001\u683c\u5f0f\u4f18\u5316\u548c\u8c03\u6574"}),"\n",(0,r.jsx)(n.p,{children:"\u4e0a\u9762\u7684\u65b9\u5f0fif\u5199\u5728\u4e00\u884c\uff0c\u9605\u8bfb\u683c\u5f0f\u4e0d\u592a\u597d\uff0c\u4fee\u6539\u540e\u5982\u4e0b"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'root@k8s-master-cms-test:/data/helm-charts/iandun-api# cat mychart/templates/configmap.yaml\r\napiVersion: v1\r\nkind: ConfigMap\r\nmetadata:\r\n  name: {{ .Release.Name }}-configmap\r\ndata: \r\n  myvale: {{ .Release.Name }}\r\n  drink: {{ quote .Values.favorite.drink }}\r\n  food: {{ .Values.favorite.food }}               //\u683c\u5f0f\u8c03\u6574\u4e3a\u4e09\u884c\r\n  {{ if eq .Values.favorite.drink "coffee" }}\r\n  mug: true \r\n  {{ end }}\r\nroot@k8s-master-cms-test:/data/helm-charts/iandun-api# helm install test-mychart --dry-run  ./mychart/\r\nNAME: test-mychart\r\nLAST DEPLOYED: Wed Oct 12 12:04:45 2022\r\nNAMESPACE: default\r\nSTATUS: pending-install\r\nREVISION: 1\r\nTEST SUITE: None\r\nHOOKS:\r\nMANIFEST:\r\n---\r\n# Source: mychart/templates/configmap.yaml\r\napiVersion: v1\r\nkind: ConfigMap\r\nmetadata:\r\n  name: test-mychart-configmap\r\ndata: \r\n  myvale: test-mychart\r\n  drink: "coffee"\r\n  food: pizza\r\n  \r\n  mug: true        ##\u7136\u540e\u4e0a\u4e0b\u6709\u7a7a\u884c\r\n\r\nroot@k8s-master-cms-test:/data/helm-charts/iandun-api#\n'})}),"\n",(0,r.jsxs)(n.p,{children:["\u9996\u5148\uff0c\u53ef\u4ee5\u4f7f\u7528\u7279\u6b8a\u5b57\u7b26\u4fee\u6539\u6a21\u677f\u58f0\u660e\u7684\u5927\u62ec\u53f7\u8bed\u6cd5\uff0c\u4ee5\u544a\u8bc9\u6a21\u677f\u5f15\u64ce\u586b\u5145\u7a7a\u767d\u3002",(0,r.jsx)(n.code,{children:"{{ - \uff08\u6dfb\u52a0\u4e86\u77ed\u5212\u7ebf\u548c\u7a7a\u683c\uff09\u8868\u793a\u5e94\u8be5\u5c06\u7a7a\u767d\u7a7a\u683c\u5de6\u79fb\uff0c\u800c - }}"}),"\u8868\u793a\u7a7a\u683c\u53f3\u4fa7\u7684\u7a7a\u683c\u5e94\u8be5\u88ab\u4f7f\u7528\u3002 \u5c0f\u5fc3\uff01 \u6362\u884c\u7b26\u4e5f\u662f\u7a7a\u683c\uff01"]}),"\n",(0,r.jsx)(n.p,{children:"\u53d6\u6d88\u7a7a\u884c\u65b9\u5f0f"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'\r\n  {{- if eq .Values.favorite.drink "coffee" }}\r\n  mug: true \r\n  {{- end }}\n'})}),"\n",(0,r.jsx)(n.p,{children:"3\u3001with\u7528\u6cd5"}),"\n",(0,r.jsx)(n.p,{children:"\u8fd9\u63a7\u5236\u7740\u53d8\u91cf\u7684\u4f5c\u7528\u57df\u3002 .(\u53e5\u53f7) \u662f\u5bf9\u5f53\u524d\u8303\u56f4\u7684\u5f15\u7528\u3002 \u6240\u4ee5.Values\u544a\u8bc9\u6a21\u677f\u5728\u5f53\u524d\u8303\u56f4\u5185\u627e\u5230Values\u5bf9\u8c61\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u901a\u8fc7with\u6307\u5b9a\u63a7\u5236\u8303\u56f4"}),"\n",(0,r.jsx)(n.p,{children:"\u8303\u56f4\u662f\u53ef\u4ee5\u6539\u53d8\u7684,with\u53ef\u4ee5\u5141\u8bb8\u4f60\u8bbe\u7f6e\u5f53\u524d\u7684\u8303\u56f4(.).\u4f8b\u5982:\u6211\u4eec\u4e00\u76f4\u5728\u5904\u7406.Values.favorites\u3002 \u8ba9\u6211\u4eec\u91cd\u5199\u6211\u4eec\u7684ConfigMap\u6765\u6539\u53d8\u3002 \u8303\u56f4\u6307\u5411.Values.favorites\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'root@k8s-master-cms-test:/data/helm-charts/iandun-api# cat mychart/templates/configmap.yaml\r\napiVersion: v1\r\nkind: ConfigMap\r\nmetadata:\r\n  name: {{ .Release.Name }}-configmap\r\ndata: \r\n  myvale: {{ .Release.Name }}\r\n  {{- with .Values.favorite }}   \r\n  drink: {{ quote .drink }}      ##\u9700\u8981\u4fee\u6539\r\n  food: {{ .food }}              ##\u9700\u8981\u4fee\u6539\r\n  {{- if eq .drink "coffee" }}   ##\u9700\u8981\u4fee\u6539\r\n  mug: true \r\n  {{- end }}\r\n  {{- end }}\r\n  \r\n  \u6ce8\u610f\uff1a \u5728witch\u8bed\u53e5\u8303\u56f4\u4e4b\u5185\uff0c\u8c03\u7528.Release.Name\u662f\u65e0\u6cd5\u8bc6\u522b\u7684\r\n  \n'})}),"\n",(0,r.jsx)(n.p,{children:"4\u3001Range\u7528\u6cd5"}),"\n",(0,r.jsx)(n.p,{children:"\u5faa\u73af\u5217\u8868\u7684\u4f7f\u7528\u65b9\u6cd5"}),"\n",(0,r.jsx)(n.p,{children:"\u8bb8\u591a\u7f16\u7a0b\u8bed\u8a00\u90fd\u652f\u6301\u4f7f\u7528for\u5faa\u73af\uff0cforeach\u5faa\u73af\u6216\u7c7b\u4f3c\u7684\u529f\u80fd\u673a\u5236\u8fdb\u884c\u5faa\u73af\u3002 \u5728Helm\u7684\u6a21\u677f\u8bed\u8a00\u4e2d\uff0c\u904d\u5386\u96c6\u5408\u7684\u65b9\u5f0f\u662f\u4f7f\u7528rang\u8fd0\u7b97\u7b26\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u9996\u5148\uff0c\u8ba9\u6211\u4eec\u5728\u6211\u4eec\u7684values.yaml\u6587\u4ef6\u4e2d\u6dfb\u52a0\u4e00\u4efd\u62ab\u8428\u914d\u6599\u5217\u8868\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"root@k8s-master-cms-test:/data/helm-charts/iandun-api# cat mychart/values.yaml\r\nfavorite: \r\n  drink: coffee\r\n  food: pizza\r\npizzaToppings:\r\n  - mushrooms\r\n  - cheese\r\n  - peppers\r\n  - onions\r\n\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u73b0\u5728\u5f00\u59cb\u5faa\u73af\u4e0a\u9762\u7684pizzaToppings"}),"\n",(0,r.jsx)(n.p,{children:"\u73b0\u5728\u6211\u4eec\u6709\u4e00\u4e2apizzaToppings\u5217\u8868\uff08\u79f0\u4e3a\u6a21\u677f\u4e2d\u7684\u4e00\u4e2a\u5207\u7247(slice)\uff09\u3002 \u6211\u4eec\u53ef\u4ee5\u4fee\u6539\u6211\u4eec\u7684\u6a21\u677f\uff0c\u5c06\u8fd9\u4e2a\u5217\u8868\u6253\u5370\u5230\u6211\u4eec\u7684ConfigMap\u4e2d\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"  pizzatoppings: |-\r\n    {{- range .Values.pizzatoppings }}\r\n    - {{ . | title | quote }}\r\n    {{- end }\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u7aef\u53e3\u5faa\u73af\u6848\u4f8b"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'root@k8s-master-cms-test:/data/helm-charts/iandun-api/mychart# cat templates/configmap.yaml \r\napiVersion: v1\r\nkind: ConfigMap\r\nmetadata:\r\n  name: {{ .Release.Name }}-configmap\r\ndata: \r\n  myvale: {{ .Release.Name }}\r\n  {{- with .Values.favorite }}\r\n  drink: {{ quote .drink }}\r\n  food: {{ .food }}\r\n  {{- if eq .drink "coffee" }}\r\n  mug: true \r\n  {{- end }}\r\n  {{- end }}   ###\u4ece\u4e0b\u9762\u5f00\u59cb, indent\u8868\u793a\u524d\u9762\u7a7a\u4e24\u4e2a\u7a7a\u683c\r\n  ports: |- \r\n  {{- range $key, $val := .Values.ports }}\r\n  {{ $key | indent 2 }}: {{ $val | quote }}\r\n  {{- end }}\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u9a8c\u8bc1\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'root@k8s-master-cms-test:/data/helm-charts/iandun-api/mychart# helm install test-mychart --dry-run ./\r\nNAME: test-mychart\r\nLAST DEPLOYED: Wed Oct 12 20:19:59 2022\r\nNAMESPACE: default\r\nSTATUS: pending-install\r\nREVISION: 1\r\nTEST SUITE: None\r\nHOOKS:\r\nMANIFEST:\r\n---\r\n# Source: mychart/templates/configmap.yaml\r\napiVersion: v1\r\nkind: ConfigMap\r\nmetadata:\r\n  name: test-mychart-configmap\r\ndata: \r\n  myvale: test-mychart\r\n  drink: "coffee"\r\n  food: pizza\r\n  mug: true    ###\u4e3b\u8981\u770b\u4e0b\u9762\u56db\u884c\r\n  ports: |-\r\n    port1: "30001"\r\n    port2: "30002"\r\n    port3: "30003"\r\n\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u8bf4\u660e\uff1a \u5982\u679c\u662f\u901a\u8fc7configmap \u521b\u5efa\u7684\u8d44\u6e90\uff0chelm\u4f1a\u5bf9\u8bed\u6cd5\u8fdb\u884c\u9a8c\u8bc1\uff0c\u683c\u5f0f\u8981\u7b26\u5408\u4e00\u5b9a\u7684\u8981\u6c42\uff0c\u5426\u5219\u4f1a\u62a5\u9519"}),"\n",(0,r.jsx)(n.p,{children:"5\u3001\u53d8\u91cf"}),"\n",(0,r.jsx)(n.p,{children:"indent 2\uff1a \u8868\u793a\u7a7a\u4e24\u683c"}),"\n",(0,r.jsx)(n.p,{children:"nindent 2:  \u8868\u793a\u6362\u884c\u7a7a\u4e24\u683c"}),"\n",(0,r.jsx)(n.p,{children:"default \u8868\u793a\u9ed8\u8ba4\u503c\uff0c\u5982\u679c\u6ca1\u6709\u5b9a\u4e49\u5219\u4f1a\u88ab\u5f15\u7528"}),"\n",(0,r.jsx)(n.p,{children:"quote \u8868\u793a\u52a0\u5f15\u53f7\u3002"}),"\n",(0,r.jsx)(n.p,{children:"-\u8868\u793a\u7f29\u8fdb\u6362\u884c\uff0c\u4e0d\u7136\u4f1a\u6709\u7a7a\u683c\uff1a"}),"\n",(0,r.jsx)(n.h2,{id:"5helm\u547d\u540d\u6a21\u677f",children:"5\u3001helm\u547d\u540d\u6a21\u677f"}),"\n",(0,r.jsx)(n.p,{children:"1\u3001template\u7528\u6cd5"}),"\n",(0,r.jsx)(n.p,{children:"\u5b9a\u4e49\u5168\u5c40\u7684\u6587\u4ef6\uff1a _helpers.tpl \uff0c \u5f53\u7136\u6587\u4ef6\u540d\u53ef\u4ee5\u81ea\u5b9a\u4e49\uff0c\u56e0\u4e3a\u662f\u5168\u5c40\u7684\uff0c\u6240\u4ee5\u5728charts\u4e2d\u7684\u6587\u4ef6\u4e5f\u53ef\u4ee5\u8c03\u7528templates\u4e2d\u7684 _helpers.tpl\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u4e5f\u5c31\u662f\u5b50\u6a21\u677f\uff0c\u4e5f\u662f\u5168\u5c40\u7684"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'root@k8s-master-cms-test:/data/helm-charts/iandun-api/mychart# cat templates/_helpers.tpl\r\n{{/* \u751f\u4ea7\u62a5\u544a  */}}\r\n{{- define "mychart.labels" }}\r\n  labels:\r\n    from: helm\r\n    date: {{ now | htmlDate }}\r\n{{- end }}\r\n\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u8c03\u7528\u6a21\u677f\u5185\u5bb9"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'root@k8s-master-cms-test:/data/helm-charts/iandun-api/mychart# cat templates/configmap.yaml\r\napiVersion: v1\r\nkind: ConfigMap\r\nmetadata:\r\n  name: {{ .Release.Name }}-configmap\r\n  {{- template "mychart.labels" }}    #\u5728\u6b64\u5904\u8c03\u7528\u6a21\u677f\u5185\u5bb9\r\ndata: \r\n  myvale: {{ .Release.Name }}\r\n  {{- with .Values.favorite }}\r\n  drink: {{ quote .drink }}\r\n  food: {{ .food }}\r\n  {{- if eq .drink "coffee" }}\r\n  mug: true \r\n  {{- end }}\r\n  {{- end }}\r\n  ports: |- \r\n  {{- range $key, $val := .Values.ports }}\r\n  {{ $key | indent 2 }}: {{ $val | quote }}\r\n  {{- end }}\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u8c03\u7528\u6a21\u677f\u6709\u5173\u4f5c\u7528\u57df\u7684\u95ee\u9898"}),"\n",(0,r.jsx)(n.p,{children:"\u5982\u4e0b\u5982\u679c\u83b7\u53d6Chart.Name \u6216\u8005Chart.Version\u8fd0\u884c\u4f1a\u76f4\u63a5\u62a5\u9519"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'root@k8s-master-cms-test:/data/helm-charts/iandun-api/mychart# cat templates/_helpers.tpl \r\n{{/* \u751f\u4ea7\u62a5\u544a  */}}\r\n{{- define "mychart.labels" }}\r\n  labels:\r\n    from: helm\r\n    date: {{ now | htmlDate }}\r\n    chart: {{ .Chart.Name }}\r\n    version: {{ .Chart.Version }}\r\n{{- end }}\r\n\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u53c2\u8003\u4ee5\u4e0b\u6ce8\u91ca\u7684\u5730\u65b9\u4fee\u6539\u5373\u53ef"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'root@k8s-master-cms-test:/data/helm-charts/iandun-api/mychart# cat templates/configmap.yaml  \r\napiVersion: v1\r\nkind: ConfigMap\r\nmetadata:\r\n  name: {{ .Release.Name }}-configmap\r\n  {{- template "mychart.labels" . }}   ###\u9700\u8981\u5728\u6b64\u5904\u52a0. \u8868\u793a\u4ece\u5f53\u524d\u8def\u5f84,\u5426\u5219\u4f1a\u62a5\u9519\r\ndata: \r\n  myvale: {{ .Release.Name }}\r\n  {{- with .Values.favorite }}\r\n  drink: {{ quote .drink }}\r\n  food: {{ .food }}\r\n  {{- if eq .drink "coffee" }}\r\n  mug: true \r\n  {{- end }}\r\n  {{- end }}\r\n  ports: |- \r\n  {{- range $key, $val := .Values.ports }}\r\n  {{ $key | indent 2 }}: {{ $val | quote }}\r\n  {{- end }}\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u6f14\u793a\u6548\u679c\uff0c\u7136\u540e\u624d\u80fd\u591f\u81ea\u52a8\u751f\u6210"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"metadata:\r\n  name: test-mychart-configmap\r\n  labels:\r\n    from: helm\r\n    date: 2022-10-12\r\n    chart: mychart\r\n    version: 0.1.0\r\n\n"})}),"\n",(0,r.jsx)(n.p,{children:"2\u3001include\u51fd\u6570"}),"\n",(0,r.jsx)(n.p,{children:"\u5bf9\u4e8e\u4e0a\u9762\u7684\u65b9\u5f0f\uff0c\u4f7f\u7528\u53e6\u4e00\u79cd\u65b9\u5f0f"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'#\u8c03\u6574\u6240\u6709\u5185\u5bb9\u5de6\u5bf9\u9f50\r\nroot@k8s-master-cms-test:/data/helm-charts/iandun-api/mychart# cat templates/_helpers.tpl \r\n{{/* \u751f\u4ea7\u62a5\u544a  */}}\r\n{{- define "mychart.labels" }}\r\nfrom: helm\r\ndate: {{ now | htmlDate }}\r\nchart: {{ .Chart.Name }}\r\nversion: {{ .Chart.Version }}\r\n{{- end }}\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u7136\u540e\u628atemplate\u6362\u6210 include\u51fd\u6570\uff0c\u901a\u8fc7indent\u7f29\u8fdb\u7684\u65b9\u5f0f\u5b9e\u73b0"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'root@k8s-master-cms-test:/data/helm-charts/iandun-api/mychart# cat   templates/configmap.yaml \r\napiVersion: v1\r\nkind: ConfigMap\r\nmetadata:\r\n  name: {{ .Release.Name }}-configmap\r\n  labels:\r\n{{- include "mychart.labels" . | indent 4 }}    ##\u6b64\u5904\u7a7a42\u4e2a\u7a7a\u683c\r\n  ##\u65b9\u5f0f2\r\n  {{- include "mychart.labels" . | nindent 4 }}    ## \u4e3a\u4e86\u7f8e\u89c2\uff0c\u7f29\u8fdb4\u4e2a\u63a7\u5236\u4e5f\u662f\u4e00\u6837\u7684\r\ndata: \r\n  myvale: {{ .Release.Name }}\r\n  {{- with .Values.favorite }}\r\n  drink: {{ quote .drink }}\r\n  food: {{ .food }}\r\n  {{- if eq .drink "coffee" }}\r\n  mug: true \r\n  {{- end }}\r\n  {{- end }}\r\n  ports: |- \r\n  {{- range $key, $val := .Values.ports }}\r\n  {{ $key | indent 2 }}: {{ $val | quote }}\r\n  {{- end }}\r\n  {{- include "mychart.labels" . | indent 2 }}   ##\u6b64\u5904\u7f29\u8fdb2\u4e2a\u7a7a\u683c\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u8bf4\u660e\uff1a \u4f7f\u7528\u540c\u4e00\u4e2a\u6a21\u677f\uff0c\u5982\u679c\u60f3\u8981\u5b9e\u73b0\u5728\u4e0d\u540c\u4f4d\u7f6e\u7684\u4f4d\u7f6e\u8c03\u6574\uff0c\u53ef\u4ee5\u901a\u8fc7include + indent\u6765\u5b9e\u73b0, \u975e\u5e38\u7075\u6d3b\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u7b2c\u4e00\u79cd\uff1a \u6240\u6709\u8d44\u6e90\u7c7b\u578b\u53ef\u4ee5\u5171\u7528\u7684\u914d\u7f6e\uff0c\u53ef\u4ee5\u901a\u8fc7include\u62bd\u53d6\u914d\u7f6e"}),"\n",(0,r.jsx)(n.p,{children:"\u6ce8\u610f\uff1a \u7c7b\u4f3c\u4e0b\u9762\u8fd9\u79cd\uff0c\u4e0d\u7ba1\u662fservice,\u8fd8\u662fdeployment,\u8fd8\u662fpvc\uff0c\u90fd\u53ef\u4ee5\u7edf\u4e00\u5316\uff0c\u6bd4\u5982\u6dfb\u52a0\u6807\u7b7e"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'apiVersion: v1\r\nkind: Service\r\nmetadata:\r\n  labels:    \r\n    app: iandun-shopmanage\r\n    time: 2022-10-21\r\n  annotations:\r\n    prometheus.io/port: "9090"\r\n    prometheus.io/scrape: "true"\r\n  name: iandun-shopmanage\r\n  namespace: andun\r\n\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u901a\u8fc7templates/_helpers.tpl \u5b9a\u4e49"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'{{- define "app.labels" }}\r\napp: {{ .Chart.Name }}\r\ntime: {{ now | htmlDate }}\r\n{{- end }}\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u7136\u540e\u63d2\u5165"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'apiVersion: v1\r\nkind: Service\r\nmetadata:\r\n  labels:\r\n    {{- include "app.labels" . | indent 4 }}  #\u6b64\u5bf9\u9f50\u683c\u5f0f\u540e\uff0c\u53ea\u9700\u8981\u6309\u7167\u6e90\u6587\u4ef6\u79fb\u52a8\u9700\u8981\u7684\u7a7a\u683c\r\n  {{- with .Values.podAnnotations }}\r\n  annotations:\r\n    {{- toYaml . | nindent 4 }}\r\n  {{- end }}\r\n  name: {{ .Chart.Name }}\r\n  namespace: {{ .Values.namespace | default "default" }}\r\nspec:\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u65b9\u5f0f2\uff1a \u6709\u4e9b\u914d\u7f6e\u4e0d\u662f\u9002\u7528\u6240\u6709\u7684\u8d44\u6e90\uff0c\u9700\u8981\u5355\u72ec\u914d\u7f6e\uff0c\u4e5f\u53ef\u4ee5\u5355\u72ec\u62bd\u53d6\u914d\u7f6e"}),"\n",(0,r.jsx)(n.p,{children:"\u6bd4\u5982\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'{{/*\r\nService health check\r\n*/}}\r\n{{- define "health.check" }}\r\nreadinessProbe:\r\n  httpGet:\r\n    path: /actuator/health\r\n    port: http\r\nlivenessProbe:\r\n  httpGet:\r\n    path: /actuator/health\r\n    port: 8080\r\n    scheme: HTTP\r\n  initialDelaySeconds: 500  #\u5bb9\u5668\u542f\u52a8\u540e\u591a\u4e45\u5f00\u59cb\u63a2\u6d4b\r\n  timeoutSeconds: 3         #\u8868\u793a\u5bb9\u5668\u5fc5\u987b\u57282s\u5185\u505a\u51fa\u76f8\u5e94\u53cd\u9988\u7ed9probe\uff0c\u5426\u5219\u89c6\u4e3a\u63a2\u6d4b\u5931\u8d25\r\n  periodSeconds: 30         #\u63a2\u6d4b\u5468\u671f\uff0c\u6bcf30s\u63a2\u6d4b\u4e00\u6b21\r\n  successThreshold: 1       #\u8fde\u7eed\u63a2\u6d4b1\u6b21\u6210\u529f\u8868\u793a\u6210\u529f\r\n  failureThreshold: 2       #\u8fde\u7eed\u63a2\u6d4b3\u6b21\u5931\u8d25\u8868\u793a\u5931\u8d25\r\n{{- end }}\n'})}),"\n",(0,r.jsx)(n.p,{children:"deployment\u64cd\u4f5c\u5982\u4e0b\uff1a"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"image-20221021140625354",src:a(4452).A+"",width:"826",height:"244"})}),"\n",(0,r.jsx)(n.h2,{id:"6helm\u6a21\u677f\u4e4b\u5176\u4ed6\u6ce8\u610f\u4e8b\u9879",children:"6\u3001helm\u6a21\u677f\u4e4b\u5176\u4ed6\u6ce8\u610f\u4e8b\u9879"}),"\n",(0,r.jsx)(n.p,{children:"1\u3001NOTES.txt\u6587\u672c\u7684\u4f7f\u7528"}),"\n",(0,r.jsx)(n.p,{children:"\u5728\u672c\u8282\u4e2d\uff0c\u6211\u4eec\u5c06\u770b\u770bHelm\u7684\u5de5\u5177\uff0c\u5411\u60a8\u7684chart\u7528\u6237\u63d0\u4f9b\u8bf4\u660e\u3002 \u5728chart\u5b89\u88c5\u6216chart\u5347\u7ea7\u7ed3\u675f\u65f6\uff0cHelm\u53ef\u4ee5\u4e3a\u7528\u6237\u6253\u5370\u51fa\u4e00\u5927\u5757\u6709\u7528\u7684\u4fe1\u606f\u3002 \u8fd9\u4e9b\u4fe1\u606f\u662f\u4f7f\u7528\u6a21\u677f\u9ad8\u5ea6\u5b9a\u5236\u7684\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u8981\u5c06\u5b89\u88c5\u6ce8\u91ca\u6dfb\u52a0\u5230chart\uff0c\u53ea\u9700\u521b\u5efa\u4e00\u4e2atemplates / NOTES.txt\u6587\u4ef6\u3002 \u8fd9\u4e2a\u6587\u4ef6\u662f\u7eaf\u6587\u672c\u7684\uff0c\u4f46\u662f\u5b83\u50cf\u4e00\u4e2a\u6a21\u677f\u4e00\u6837\u5904\u7406\uff0c\u5e76\u4e14\u5177\u6709\u6240\u6709\u53ef\u7528\u7684\u666e\u901a\u6a21\u677f\u51fd\u6570\u548c\u5bf9\u8c61\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u6211\u4eec\u6765\u521b\u5efa\u4e00\u4e2a\u7b80\u5355\u7684NOTES.txt\u6587\u4ef6\uff1a"}),"\n",(0,r.jsx)(n.p,{children:"NOTES\u6587\u4ef6\u6839\u636e\u60c5\u51b5\u4fee\u6539"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"root@k8s-master-cms-test:/data/helm-charts/iandun-api/mychart# cat   templates/NOTES.txt\r\nThank you for install {{ .Chart.Name }}\r\n\r\nNow version is {{ .Chart.Version }}\r\n\r\nYour release name is {{ .Release.Name }}\r\n\r\n\r\nTo learn more about the release , try:\r\n   $ helm  status {{ .Release.Name }}\r\n   $ helm  get {{ .Release.Name }}\r\n\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u7136\u540e\u6d4b\u8bd5"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"root@k8s-master-cms-test:/data/helm-charts/iandun-api/mychart# helm install test-mychart --dry-run --debug ./\r\n....\r\n---\r\nNOTES:\r\nThank you for install mychart\r\n\r\nNow version is 0.1.0\r\n\r\nYour release name is test-mychart\r\n\r\n\r\nTo learn more about the release , try:\r\n   $ helm  status test-mychart\r\n   $ helm  get test-mychart\r\n\n"})}),"\n",(0,r.jsx)(n.h2,{id:"7subcharts\u548c\u5168\u5c40values",children:"7\u3001subcharts\u548c\u5168\u5c40values"}),"\n",(0,r.jsx)(n.p,{children:"\u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u6211\u4eec\u53ea\u7528\u4e00\u4e2achart\u5de5\u4f5c\u3002 \u4f46\u662fchart\u53ef\u4ee5\u6709\u79f0\u4e3asubcharts\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u5b83\u4eec\u4e5f\u6709\u81ea\u5df1\u7684values\u548c\u6a21\u677f\u3002 \u5728\u672c\u8282\u4e2d\uff0c\u6211\u4eec\u5c06\u521b\u5efa\u4e00\u4e2asubcharts\u5e76\u67e5\u770b\u6211\u4eec\u53ef\u4ee5\u4ece\u6a21\u677f\u4e2d\u8bbf\u95ee\u503c\u7684\u4e0d\u540c\u65b9\u5f0f\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u5728\u6211\u4eec\u6df1\u5165\u4e86\u89e3\u4ee3\u7801\u4e4b\u524d\uff0c\u9700\u8981\u4e86\u89e3\u4e00\u4e9b\u6709\u5173subcharts\u7684\u91cd\u8981\u7ec6\u8282\u3002"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Subcharts\u88ab\u8ba4\u4e3a\u662f\u201c\u72ec\u7acb\u7684\u201d\uff0c\u8fd9\u610f\u5473\u7740subcharts\u4e0d\u80fd\u660e\u786e\u4f9d\u8d56\u4e8e\u5176\u7236\u56fe\u3002"}),"\n",(0,r.jsx)(n.li,{children:"\u56e0\u6b64\uff0csubcharts\u65e0\u6cd5\u8bbf\u95ee\u5176\u7236\u9879\u7684values\u3002"}),"\n",(0,r.jsx)(n.li,{children:"\u7236charts\u53ef\u4ee5\u8986\u76d6subcharts\u7684values\u3002"}),"\n",(0,r.jsx)(n.li,{children:"helm\u6709\u5168\u5c40values\u7684\u6982\u5ff5\uff0c\u53ef\u4ee5\u88ab\u6240\u6709charts\u8bbf\u95ee\u3002"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u5f53\u6211\u4eec\u5728\u672c\u8282\u4e2d\u901a\u8fc7\u793a\u4f8b\u65f6\uff0c\u5176\u4e2d\u8bb8\u591a\u6982\u5ff5\u5c06\u53d8\u5f97\u66f4\u52a0\u6e05\u6670"}),"\n",(0,r.jsx)(n.p,{children:"\u521b\u5efasubcharts"}),"\n",(0,r.jsx)(n.p,{children:"\u5bf9\u4e8e\u8fd9\u4e9b\u7ec3\u4e60\uff0c\u6211\u4eec\u5c06\u4ece\u672c\u6307\u5357\u5f00\u59cb\u65f6\u521b\u5efa\u7684mychart/chart\u5f00\u59cb\uff0c\u5e76\u5728\u5176\u4e2d\u6dfb\u52a0\u4e00\u4e2a\u65b0\u7684charts\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"$ cd mychart/charts\r\n$ helm create mysubchart\r\nCreating mysubchart\r\n$ rm -rf mysubchart/templates/*.*\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u6ce8\u610f\uff0c\u548c\u4ee5\u524d\u4e00\u6837\uff0c\u6211\u4eec\u5220\u9664\u4e86\u6240\u6709\u7684\u57fa\u672c\u6a21\u677f\uff0c\u4ee5\u4fbf\u6211\u4eec\u53ef\u4ee5\u4ece\u5934\u5f00\u59cb\u3002 \u5728\u672c\u6307\u5357\u4e2d\uff0c\u6211\u4eec\u4e13\u6ce8\u4e8e\u6a21\u677f\u5982\u4f55\u5de5\u4f5c\uff0c\u800c\u4e0d\u662f\u7ba1\u7406\u4f9d\u8d56\u5173\u7cfb\u3002 \u4f46chart\u6307\u5357\u6709\u66f4\u591a\u5173\u4e8esubcharts\u5de5\u4f5c\u7684\u4fe1\u606f\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u5c06value\u548c\u6a21\u677f\u6dfb\u52a0\u5230subcharts"}),"\n",(0,r.jsx)(n.p,{children:"\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u4e3amysubchart\u56fe\u8868\u521b\u5efa\u4e00\u4e2a\u7b80\u5355\u7684\u6a21\u677f\u548cvalues\u6587\u4ef6\u3002 \u5728mychart/charts/mysubchart\u4e2d\u5e94\u8be5\u5df2\u7ecf\u6709\u4e86\u4e00\u4e2avalues.yaml\u3002 \u6211\u4eec\u5c06\u8fd9\u6837\u8bbe\u7f6e\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"dessert: cake\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u5c06\u5728mychart/charts/mysubchart/templates/configmap.yaml\u76ee\u5f55\u4e2d\u521b\u5efa\u4e00\u4e2a\u65b0\u7684ConfigMap\u6a21\u677f:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"apiVersion: v1\r\nkind: ConfigMap\r\nmetadata:\r\n  name: {{ .Release.Name }}-cfgmap2\r\ndata:\r\n  dessert: {{ .Values.dessert }}\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u7531\u4e8e\u6bcf\u4e2asubcharts\u90fd\u662f\u72ec\u7acb\u7684chart\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u81ea\u884c\u6d4b\u8bd5mysubchart\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'$ helm install --dry-run --debug mychart/charts/mysubchart\r\nSERVER: "localhost:44134"\r\nCHART PATH: /Users/mattbutcher/Code/Go/src/k8s.io/helm/_scratch/mychart/charts/mysubchart\r\nNAME:   newbie-elk\r\nTARGET NAMESPACE:   default\r\nCHART:  mysubchart 0.1.0\r\nMANIFEST:\r\n---\r\n# Source: mysubchart/templates/configmap.yaml\r\napiVersion: v1\r\nkind: ConfigMap\r\nmetadata:\r\n  name: newbie-elk-cfgmap2\r\ndata:\r\n  dessert: cake\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u4ece\u7236chart\u4e2d\u8986\u76d6value"}),"\n",(0,r.jsx)(n.p,{children:"\u6211\u4eec\u539f\u6765\u7684chart mychart\u73b0\u5728\u662fmysubchart\u7684\u7236chart[\u3002 \u8fd9\u79cd\u5173\u7cfb\u5b8c\u5168\u57fa\u4e8emysubchart\u5728mychart/charts\u4e2d\u7684\u4e8b\u5b9e\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u7531\u4e8emychart\u662f\u7236\u7ea7\uff0c\u6211\u4eec\u53ef\u4ee5\u5728mychart\u4e2d\u6307\u5b9a\u914d\u7f6e\uff0c\u5e76\u5c06\u8be5\u914d\u7f6e\u63a8\u5165mysubchart\u3002 \u4f8b\u5982\uff0c\u6211\u4eec\u53ef\u4ee5\u50cf\u8fd9\u6837\u4fee\u6539mychart/values.yaml\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"favorite:\r\n  drink: coffee\r\n  food: pizza\r\npizzaToppings:\r\n  - mushrooms\r\n  - cheese\r\n  - peppers\r\n  - onions\r\nmysubchart:\r\n  dessert: ice cream\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u8bf7\u6ce8\u610f\u6700\u540e\u4e24\u884c\u3002 mysubchart\u90e8\u5206\u5185\u7684\u4efb\u4f55\u6307\u4ee4\u90fd\u5c06\u88ab\u53d1\u9001\u5230mysubchart chart\u3002 \u56e0\u6b64\uff0c\u5982\u679c\u6211\u4eec\u8fd0\u884chelm install \u2014dry-run \u2014debug mychart\uff0c\u6211\u4eec\u5c06\u770b\u5230\u7684\u5176\u4e2d\u4e00\u4e2a\u662fmysubchart ConfigMap\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# Source: mychart/charts/mysubchart/templates/configmap.yaml\r\napiVersion: v1\r\nkind: ConfigMap\r\nmetadata:\r\n  name: unhinged-bee-cfgmap2\r\ndata:\r\n  dessert: ice cream\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u9876\u5c42\u7684value\u73b0\u5728\u5df2\u7ecf\u8986\u76d6\u4e86subchart\u7684\u4ef7\u503c\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u8fd9\u91cc\u6709\u4e00\u4e2a\u91cd\u8981\u7684\u7ec6\u8282\u9700\u8981\u6ce8\u610f\u3002 \u6211\u4eec\u6ca1\u6709\u5c06mychart/charts/mysubchart/templates/configmap.yaml\u7684\u6a21\u677f\u66f4\u6539\u4e3a\u6307\u5411.Values.mysubchart.dessert\u3002 \u4ece\u8be5\u6a21\u677f\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u8be5\u503c\u4ecd\u4f4d\u4e8e.Values.dessert\u3002 \u968f\u7740\u6a21\u677f\u5f15\u64ce\u4e00\u8d77\u4f20\u9012\u503c\uff0c\u5b83\u4f1a\u8bbe\u7f6e\u8303\u56f4\u3002 \u56e0\u6b64\uff0c\u5bf9\u4e8emysubchart\u6a21\u677f\uff0c\u53ea\u6709\u4e13\u95e8\u7528\u4e8emysubchart\u7684\u503c\u5c06\u5728.Values\u4e2d\u53ef\u7528\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u4f46\u6709\u65f6\u5019\uff0c\u60a8\u786e\u5b9e\u5e0c\u671b\u67d0\u4e9b\u503c\u53ef\u7528\u4e8e\u6240\u6709\u6a21\u677f\u3002 \u8fd9\u662f\u4f7f\u7528\u5168\u5c40chart value\u5b8c\u6210\u7684\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u5168\u5c40chart values"}),"\n",(0,r.jsx)(n.p,{children:"\u5168\u5c40values\u662f\u53ef\u4ee5\u4ece\u4efb\u4f55chart\u6216subchart\u4ee5\u5b8c\u5168\u76f8\u540c\u7684\u540d\u79f0\u8bbf\u95ee\u7684values\u3002 \u5168\u5c40\u9700\u8981\u660e\u786e\u58f0\u660e\u3002 \u60a8\u4e0d\u80fd\u50cf\u73b0\u6709\u5168\u5c40\u4e00\u6837\u4f7f\u7528\u975e\u5168\u5c40\u3002"}),"\n",(0,r.jsx)(n.p,{children:"Values\u6570\u636e\u7c7b\u578b\u6709\u4e00\u4e2a\u540d\u4e3aValues.global\u7684\u4fdd\u7559\u90e8\u5206\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u5168\u5c40\u503c\u3002 \u6211\u4eec\u5728mychart/values.yaml\u6587\u4ef6\u4e2d\u8bbe\u7f6e\u4e00\u4e2a\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"favorite:\r\n  drink: coffee\r\n  food: pizza\r\npizzaToppings:\r\n  - mushrooms\r\n  - cheese\r\n  - peppers\r\n  - onions\r\nmysubchart:\r\n  dessert: ice cream\r\nglobal:\r\n  salad: caesar\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u7531\u4e8e\u5168\u5c40\u53d8\u91cf\u7684\u5de5\u4f5c\u65b9\u5f0f\uff0cmychart/templates/configmap.yaml\u548cmysubchart/templates/configmap.yaml\u5e94\u8be5\u80fd\u591f\u4ee5",(0,r.jsx)(n.code,{children:"{{.Values.global.salad}}"}),"\u7684\u5f62\u5f0f\u8bbf\u95ee\u8be5\u503c\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"mychart/templates/configmap.yaml"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"apiVersion: v1\r\nkind: ConfigMap\r\nmetadata:\r\n  name: {{ .Release.Name }}-configmap\r\ndata:\r\n  salad: {{ .Values.global.salad }}\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"mysubchart/templates/configmap.yaml"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:" \u590d\u5236\u4ee3\u7801apiVersion: v1kind: ConfigMapmetadata:  name: {{ .Release.Name }}-cfgmap2data:  dessert: {{ .Values.dessert }}  salad: {{ .Values.global.salad }}\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u73b0\u5728\uff0c\u5982\u679c\u6211\u4eec\u8fd0\u884cdry run install\uff0c\u6211\u4eec\u4f1a\u5728\u4e24\u4e2a\u8f93\u51fa\u4e2d\u770b\u5230\u76f8\u540c\u7684\u503c\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# Source: mychart/templates/configmap.yaml\r\napiVersion: v1\r\nkind: ConfigMap\r\nmetadata:\r\n  name: silly-snake-configmap\r\ndata:\r\n  salad: caesar\r\n---\r\n# Source: mychart/charts/mysubchart/templates/configmap.yaml\r\napiVersion: v1\r\nkind: ConfigMap\r\nmetadata:\r\n  name: silly-snake-cfgmap2\r\ndata:\r\n  dessert: ice cream\r\n  salad: caesar\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u5168\u5c40\u53d8\u91cf\u5bf9\u4e8e\u4f20\u9012\u8fd9\u6837\u7684\u4fe1\u606f\u975e\u5e38\u6709\u7528\uff0c\u4f46\u5b83\u786e\u5b9e\u9700\u8981\u4e00\u4e9b\u8ba1\u5212\u6765\u786e\u4fdd\u5c06\u6b63\u786e\u7684\u6a21\u677f\u914d\u7f6e\u4e3a\u4f7f\u7528\u5168\u5c40\u53d8\u91cf\u3002"}),"\n",(0,r.jsx)(n.h2,{id:"8witch\u7528\u6cd5",children:"8\u3001witch\u7528\u6cd5"}),"\n",(0,r.jsx)(n.p,{children:"\u6bd4\u5982\u7ed9service\u6dfb\u52a0\u6ce8\u91ca\uff0c\u6ce8\u91ca\u6bd4\u8f83\u591a\uff0c\u53ef\u4ee5\u4f7f\u7528\u5faa\u73af\u7684\u4e00\u79cd\u65b9\u5f0f"}),"\n",(0,r.jsx)(n.p,{children:"\u5728values\u4e2d\u5b9a\u4e49\u5982\u4e0b:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'svcAnnotations:\r\n  prometheus.io/scrape: "true"   #\u5bf9\u4e8e\u4e1a\u52a1\u9700\u8981\u5728\u6b64\u5904\u6dfb\u52a0\u4e00\u884c --\u975e\u5e38\u91cd\u8981\r\n  prometheus.io/port: "9090"\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u7136\u540e\u5728service\u4e2d\u5b9a\u4e49\u5982\u4e0b\u65b9\u5f0f"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"image-20221021141547877",src:a(2274).A+"",width:"778",height:"504"})}),"\n",(0,r.jsx)(n.h2,{id:"10\u7f51\u7edc\u67e5\u9605-upgrade",children:"10\u3001\u7f51\u7edc\u67e5\u9605-upgrade"}),"\n",(0,r.jsx)(n.p,{children:"CI\u6784\u5efa"}),"\n",(0,r.jsx)(n.p,{children:"\u6211\u5728\u6211\u7684\u6784\u5efa CI \u4e2d\u4f7f\u7528\u4e0b\u9762\u7684\u547d\u4ee4\uff0c\u4ee5\u4fbf\u5728\u6bcf\u6b21\u6784\u5efa\u65f6\u90e8\u7f72\u638c\u8235\u3002\u4f46\u662f\uff0c\u6211\u6ce8\u610f\u5230\u672a\u90e8\u7f72\u66f4\u6539\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"              helm upgrade --install --force \\\r\n              --namespace=default \\\r\n              --values=kubernetes/values.yaml \\\r\n              --set image.tag=latest \\\r\n              --set service.name=my-service \\\r\n              --set image.pullPolicy=Always \\\r\n              myService kubernetes/myservice\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u60a8\u4e0d\u5fc5\u6bcf\u6b21\u90fd\u7528\u65b0\u6807\u7b7e\u6807\u8bb0\u56fe\u50cf\u3002\u53ea\u9700\u6dfb\u52a0"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'date: "{{ now | unixEpoch }}"\n'})}),"\n",(0,r.jsxs)(n.p,{children:["\u4e0b",(0,r.jsx)(n.code,{children:"spec/template/metadata/labels"}),"\u5e76\u8bbe\u7f6e",(0,r.jsx)(n.code,{children:"imagePullPolicy: Always"}),"\u3002Helm \u4f1a\u68c0\u6d4b\u90e8\u7f72\u5bf9\u8c61\u7684\u53d8\u5316\uff0c\u5e76\u4e14\u6bcf\u6b21\u90fd\u4f1a\u62c9\u53d6\u6700\u65b0\u7684\u955c\u50cf\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'apiVersion: apps/v1\r\nkind: Deployment\r\nmetadata:\r\n  name: "{{ .Release.Name }}-{{ .Values.app.frontendName }}-deployment"\r\n  labels:\r\n    app.kubernetes.io/name: {{ .Values.app.frontendName }}\r\n    app.kubernetes.io/instance: {{ .Release.Name }}\r\nspec:\r\n  replicas: {{ .Values.replicaCount }}\r\n  selector:\r\n    matchLabels:\r\n      app.kubernetes.io/name: {{ .Values.app.frontendName }}\r\n      app.kubernetes.io/instance: {{ .Release.Name }}\r\n  template:\r\n    metadata:\r\n      labels:\r\n        app.kubernetes.io/name: {{ .Values.app.frontendName }}\r\n        app.kubernetes.io/instance: {{ .Release.Name }}\r\n        date: "{{ now | unixEpoch }}"\r\n    spec:\r\n      containers:\r\n        - name: {{ .Values.app.frontendName }}\r\n          image: "rajesh12/myimage:latest"\r\n          imagePullPolicy: Always\r\n###\u6765\u81ea\u7f51\u7edc\n'})}),"\n",(0,r.jsxs)(n.p,{children:["\u8fd0\u884c",(0,r.jsx)(n.code,{children:"helm upgrade releaseName ./my-chart"}),"\u4ee5\u5347\u7ea7\u60a8\u7684\u7248\u672c"]}),"\n",(0,r.jsx)(n.p,{children:"\u5b98\u7f51\u6587\u6863\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"$ helm upgrade -f myvalues.yaml -f override.yaml redis ./redis\r\n$ helm upgrade --set foo=bar --set foo=newbar redis ./redis\n"})}),"\n",(0,r.jsx)(n.h2,{id:"11\u95ee\u9898\u8bb0\u5f55",children:"11\u3001\u95ee\u9898\u8bb0\u5f55"}),"\n",(0,r.jsx)(n.p,{children:"\u955c\u50cf\u65e0\u6548\uff0c\u4e0d\u4f1a\u5f71\u54cd\u73b0\u6709\u5df2\u7ecf\u8fd0\u884c\u7684\u670d\u52a1"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"image-20221020152544227",src:a(6361).A+"",width:"566",height:"88"})}),"\n",(0,r.jsx)(n.p,{children:"\u4ee5\u4e0a\u660e\u663e\u5b58\u5728\u9519\u8bef\u5199\u6cd5\uff0c\u66f4\u65b0\u540e\u4e0d\u4f1a\u66f4\u65b0\u90e8\u7f72"}),"\n",(0,r.jsx)(n.p,{children:"helm upgrade  iandun-shopmanage ./ --namespace andun"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"image-20221020152505648",src:a(5455).A+"",width:"1287",height:"199"})}),"\n",(0,r.jsx)(n.p,{children:"\u66f4\u65b0\u6b63\u786e\u540e\uff0c\u662f\u6eda\u52a8\u66f4\u65b0\uff0c\u5f53\u524d\u670d\u52a1\u6b63\u5e38\u540e\uff0c\u624d\u5220\u9664\u4ee5\u524d\u65e7\u7248\u672c"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"image-20221020152723463",src:a(5362).A+"",width:"1310",height:"248"})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(m,{...e})}):m(e)}},5455:(e,n,a)=>{a.d(n,{A:()=>r});const r=a.p+"assets/images/image-20221020152505648-364a0b29c81aa05c666076ca18556c12.png"},6361:(e,n,a)=>{a.d(n,{A:()=>r});const r="data:image/png;base64,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"},5362:(e,n,a)=>{a.d(n,{A:()=>r});const r=a.p+"assets/images/image-20221020152723463-4d30070d65cc47307ea223cd1e6c2a8f.png"},4452:(e,n,a)=>{a.d(n,{A:()=>r});const r=a.p+"assets/images/image-20221021140625354-69411585f50f5d35ec16a1dd916e1de7.png"},2274:(e,n,a)=>{a.d(n,{A:()=>r});const r=a.p+"assets/images/image-20221021141547877-4037b029f1a26c1de4ff7ed7a0e498a1.png"},8453:(e,n,a)=>{a.d(n,{R:()=>t,x:()=>i});var r=a(6540);const s={},l=r.createContext(s);function t(e){const n=r.useContext(l);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);