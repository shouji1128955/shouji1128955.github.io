"use strict";(self.webpackChunkbookshell=self.webpackChunkbookshell||[]).push([[9226],{5122:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>i,contentTitle:()=>l,default:()=>p,frontMatter:()=>a,metadata:()=>o,toc:()=>c});var t=r(4848),s=r(8453);const a={},l=void 0,o={id:"Sre/\u4e2d\u95f4\u4ef6/YAPI",title:"YAPI",description:"yum install   gcc-c++",source:"@site/docs/Sre/2-\u4e2d\u95f4\u4ef6/6.YAPI.md",sourceDirName:"Sre/2-\u4e2d\u95f4\u4ef6",slug:"/Sre/\u4e2d\u95f4\u4ef6/YAPI",permalink:"/docs/Sre/\u4e2d\u95f4\u4ef6/YAPI",draft:!1,unlisted:!1,editUrl:"https://github.com/shouji1128955/bookshell/edit/main/docs/Sre/2-\u4e2d\u95f4\u4ef6/6.YAPI.md",tags:[],version:"current",lastUpdatedBy:"zhanglaiqiang",lastUpdatedAt:1729362879e3,sidebarPosition:6,frontMatter:{},sidebar:"SreMiddleSoft",previous:{title:"Postgresql",permalink:"/docs/Sre/\u4e2d\u95f4\u4ef6/Postgresql"},next:{title:"databasebackup-restore",permalink:"/docs/Sre/\u4e2d\u95f4\u4ef6/databasebackup-restore"}},i={},c=[];function d(e){const n={a:"a",code:"code",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"yum update && yum install autoconf automake bzip2 dpkg-dev file gcc-c++ gcc ImageMagick bzip2-devel glibc-devel libcurl-devel db4-devel libevent-devel libffi-devel gdbm-devel glib2-devel gmp-devel libjpeg-turbo-devel krb5-devel xz-devel ImageMagick-devel libmaxminddb-devel ncurses-devel libpng-devel postgresql-devel readline-devel sqlite-devel openssl-devel libtool libwebp-devel libxml2-devel libxslt-devel libyaml-devel make patch unzip xz zlib-devel\r\nyum install  ca-certificates curl netbase wget git\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"curl -sL https://rpm.nodesource.com/setup_14.x | sudo -E bash -\r\ncurl -sL https://dl.yarnpkg.com/rpm/yarn.repo | sudo tee /etc/yum.repos.d/yarn.repo\r\nyum install yarn nodejs -y\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:'vi /etc/yum.repos.d/mongodb-org-4.4.repo\r\n[mongodb-org-4.4]\r\nname=MongoDB Repository\r\nbaseurl=https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/4.4/x86_64/\r\ngpgcheck=1\r\nenabled=1\r\ngpgkey=https://www.mongodb.org/static/pgp/server-4.4.asc\r\n\r\nyum install mongodb-org -y  && service mongod  start\r\n\r\ndb.createUser(\r\n  {\r\n    user: "test1",\r\n    pwd: "test1",\r\n    roles: [ { role: "userAdminAnyDatabase", db: "admin" } ]\r\n  }\r\n)\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"\r\nmkdir -p /yapi/vendors\r\n\r\n\r\n\r\ncd /yapi/ \r\ngit clone https://github.com/YMFE/yapi.git -b v1.10.2 vendors\r\ncd vendors \r\nnpm install --registry https://registry.npm.taobao.org     \r\n#\u62a5\u9519nosuchfile\r\nrm -rf node_modules\r\nnpm cache clean --force\r\nrm package-lock.json\n"})}),"\n",(0,t.jsxs)(n.p,{children:["#\u62a5\u9519make: cc: Command not found\r\nyum install   gcc-c++\r\nnpm install --registry ",(0,t.jsx)(n.a,{href:"https://registry.npm.taobao.org",children:"https://registry.npm.taobao.org"})]}),"\n",(0,t.jsx)(n.p,{children:"####\u89e3\u51b3c++17\u62a5\u9519"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"yum install -y gcc-c++ cmake\r\nyum install centos-release-scl\r\nyum install -y devtoolset-7\r\nscl enable devtoolset-7 bash\r\ng++ --version\r\nnpm install --registry https://registry.npm.taobao.org    \n"})}),"\n",(0,t.jsx)(n.p,{children:"##\u89e3\u51b3\u5404\u79cdnpm install yapi-plugin-gitlab-oauth2\u62a5\u9519"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"npm install -g yapi-cli --registry https://registry.npm.taobao.org\r\nnpm install -g ykit --registry https://registry.npm.taobao.org\r\n#npm uninstall react@16.9.0\r\nnpm install react@16.2.0\r\nnpm install swagger-client@3.5.1\r\n#npm install yapi-plugin-gitlab-oauth2 --registry https://registry.npm.taobao.org\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:'cp -a config_example.json  ../config.json\r\nvi ../config.json\r\n{\r\n   "port": "3000",\r\n   "adminAccount": "admin@admin.com",\r\n   "timeout": 120000,\r\n   "db": {\r\n      "servername": "127.0.0.1",\r\n      "DATABASE": "yapi",\r\n      "port": 27017,\r\n      "user": "test1",\r\n      "pass": "test1",\r\n      "authSource": ""\r\n   },\r\n   "mail": {\r\n      "enable": true,\r\n      "host": "smtp.163.com",\r\n      "port": 465,\r\n      "from": "***@163.com",\r\n      "auth": {\r\n         "user": "***@163.com",\r\n         "pass": "*****"\r\n      }\r\n   },\r\n   "plugins": [\r\n      {\r\n         "name": "gitlab",\r\n         "options": {\r\n            "host": "http://git",\r\n            "redirectUri": "http://yapi:3000/api/plugin/oauth2/callback",\r\n            "appId": "3f05fdf6c3dd5bb6eeac5185e944ccf87d957cabb538c895899d461149e5bd80",\r\n            "appSecret": "d2564d6e3862e91b75d229b7fa8cb6abff88fa8498d8449617578c1c99a4ca5f",\r\n            "accessToken": "4-4g_eH-i-B58LtaDx8Q",\r\n            "loginPath": "/api/v4/user",\r\n            "authPath": "/oauth/authorize",\r\n            "tokenPath": "/oauth/token",\r\n            "emailKey": "email",\r\n            "userKey": "username",\r\n            "emailPostfix": "@yapi.com"\r\n         }\r\n      }\r\n   ]\r\n}\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:'cd  /yapi\r\nyapi plugin --name yapi-plugin-gitlab\r\n##\u89e3\u51b3\u62a5\u9519precated since React 16.9.0\r\ncp -a  /yapi/vendors/.eslintrc.js /yapi/vendors/.eslintrc.js.bk\r\nvi /yapi/vendors/.eslintrc.js\r\n    \r\n    plugins: [\r\n        "react"\r\n    ],\r\n    "settings": {\r\n      "react": {\r\n        "version": "detect"\r\n      }\r\n    },\r\n\r\nyapi plugin --name yapi-plugin-gitlab\r\n\r\ncd vendors\r\nnode server/app.js\n'})})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>l,x:()=>o});var t=r(6540);const s={},a=t.createContext(s);function l(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);