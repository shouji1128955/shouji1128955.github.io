<!doctype html>
<html lang="zh-CN" dir="ltr" class="blog-wrapper blog-list-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Blog | LiteShell</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docusaurus.io/zh-CN/img/undraw_typewriter.svg"><meta data-rh="true" name="twitter:image" content="https://docusaurus.io/zh-CN/img/undraw_typewriter.svg"><meta data-rh="true" property="og:url" content="https://shouji1128955.github.io/bookshell/blog"><meta data-rh="true" property="og:locale" content="zh_CN"><meta data-rh="true" property="og:locale:alternate" content="en"><meta data-rh="true" name="docusaurus_locale" content="zh-CN"><meta data-rh="true" name="docsearch:language" content="zh-CN"><meta data-rh="true" property="og:title" content="Blog | LiteShell"><meta data-rh="true" name="description" content="Blog"><meta data-rh="true" property="og:description" content="Blog"><meta data-rh="true" name="docusaurus_tag" content="blog_posts_list"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_posts_list"><link data-rh="true" rel="icon" href="/bookshell/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://shouji1128955.github.io/bookshell/blog"><link data-rh="true" rel="alternate" href="https://shouji1128955.github.io/bookshell/blog" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://shouji1128955.github.io/bookshell/en/blog" hreflang="en"><link data-rh="true" rel="alternate" href="https://shouji1128955.github.io/bookshell/blog" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"Blog","@id":"https://shouji1128955.github.io/bookshell/blog","mainEntityOfPage":"https://shouji1128955.github.io/bookshell/blog","headline":"Blog","description":"Blog","blogPost":[{"@type":"BlogPosting","@id":"https://shouji1128955.github.io/bookshell/blog/2023/12/19/mongodb数据库恢复","mainEntityOfPage":"https://shouji1128955.github.io/bookshell/blog/2023/12/19/mongodb数据库恢复","url":"https://shouji1128955.github.io/bookshell/blog/2023/12/19/mongodb数据库恢复","headline":"mongodb数据库恢复","name":"mongodb数据库恢复","description":"分析问题现状","datePublished":"2023-12-19T00:00:00.000Z","author":[],"keywords":[]},{"@type":"BlogPosting","@id":"https://shouji1128955.github.io/bookshell/blog/2024/4.npm操作","mainEntityOfPage":"https://shouji1128955.github.io/bookshell/blog/2024/4.npm操作","url":"https://shouji1128955.github.io/bookshell/blog/2024/4.npm操作","headline":"npm常用命令","name":"npm常用命令","description":"简介","datePublished":"2023-10-18T06:15:14.000Z","author":[],"keywords":[]},{"@type":"BlogPosting","@id":"https://shouji1128955.github.io/bookshell/blog/config-docusaurus-v2","mainEntityOfPage":"https://shouji1128955.github.io/bookshell/blog/config-docusaurus-v2","url":"https://shouji1128955.github.io/bookshell/blog/config-docusaurus-v2","headline":"config-docusaurus-v2","name":"config-docusaurus-v2","description":"A short description of this page","datePublished":"2023-10-18T00:00:00.000Z","author":{"@type":"Person","name":"zhanglaiqiang","description":"liteshell.cn maintainer","url":"https://github.com/shouji1128955/bookshell","image":"https://avatars.githubusercontent.com/u/49987752?v=4"},"keywords":["docusaurus","describing","the main topics"]},{"@type":"BlogPosting","@id":"https://shouji1128955.github.io/bookshell/blog/github结合actions实现自动化部署","mainEntityOfPage":"https://shouji1128955.github.io/bookshell/blog/github结合actions实现自动化部署","url":"https://shouji1128955.github.io/bookshell/blog/github结合actions实现自动化部署","headline":"github结合actions实现自动化部署","name":"github结合actions实现自动化部署","description":"A short description of this page","datePublished":"2023-10-13T00:00:00.000Z","author":{"@type":"Person","name":"zhanglaiqiang","description":"liteshell.cn maintainer","url":"https://github.com/shouji1128955/bookshell","image":"https://avatars.githubusercontent.com/u/49987752?v=4"},"keywords":["docusaurus","describing","the main topics"]}]}</script><link rel="alternate" type="application/rss+xml" href="/bookshell/blog/rss.xml" title="LiteShell RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/bookshell/blog/atom.xml" title="LiteShell Atom Feed"><link rel="stylesheet" href="/bookshell/assets/css/styles.fb7577d1.css">
<script src="/bookshell/assets/js/runtime~main.c0446ed9.js" defer="defer"></script>
<script src="/bookshell/assets/js/main.d13dfaa7.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/bookshell/"><div class="navbar__logo"><img src="/bookshell/img/logo.svg" alt="LiteShell" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/bookshell/img/logo.svg" alt="LiteShell" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">LiteShell</b></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Sre</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/bookshell/docs/Sre/日常运维/operator">日常运维</a></li><li><a class="dropdown__link" href="/bookshell/docs/Sre/中间件/Harbor">中间件</a></li><li><a class="dropdown__link" href="/bookshell/docs/Sre/面试题/基础面试题">面试题</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Kubernetes</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/bookshell/docs/k8s/operator">Kubernetes</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Prometheus</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/bookshell/docs/Prometheus/grafana">grafana</a></li><li><a class="dropdown__link" href="/bookshell/docs/Prometheus/prometheus/告警指标汇总">Prometheus</a></li><li><a class="dropdown__link" href="/bookshell/docs/Prometheus/alertManager/alertmanager告警配置">AlertManager</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">DevOps</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/bookshell/docs/DevOps/jenkins/jenkins安装配置/jenkins安装配置">jenkins</a></li><li><a class="dropdown__link" href="/bookshell/docs/DevOps/gitOps/tekton安装">gitOps</a></li><li><a class="dropdown__link" href="/bookshell/docs/DevOps/ELK/ELK测试部署">ELK</a></li><li><a class="dropdown__link" href="/bookshell/docs/DevOps/skywalking/zookeeper安装">skywalking</a></li><li><a class="dropdown__link" href="/bookshell/docs/DevOps/observability/OpenTelemetry">observability</a></li><li><a class="dropdown__link" href="/bookshell/docs/DevOps/terraform/terraform">terraform</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Golang</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/bookshell/docs/Golang/golang基础/Go核心编程2023/golang">golang基础</a></li><li><a class="dropdown__link" href="/bookshell/docs/Golang/golang进阶/gin框架2023/Gin框架">golang进阶</a></li><li><a class="dropdown__link" href="/bookshell/docs/Golang/golang运维/项目1-Bingo/Bingo">golang运维</a></li><li><a class="dropdown__link" href="/bookshell/docs/Golang/VUE/vue入门教程/html基础">Vue</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">JAVA</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/bookshell/docs/Java/JAVA/admin组件">Java</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Treasure</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/bookshell/docs/Treasure/Wisdom/国学经典">Plan and strategize</a></li><li><a class="dropdown__link" href="/bookshell/docs/Treasure/Studytour/莱卡">read book</a></li></ul></div><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/bookshell/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="搜索" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="最近博文导航"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><div role="group"><h3 class="yearGroupHeading_rMGB">2023</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/bookshell/blog/2023/12/19/mongodb数据库恢复">mongodb数据库恢复</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/bookshell/blog/2024/4.npm操作">npm常用命令</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/bookshell/blog/config-docusaurus-v2">config-docusaurus-v2</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/bookshell/blog/github结合actions实现自动化部署">github结合actions实现自动化部署</a></li></ul></div></nav></aside><main class="col col--7"><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/bookshell/blog/2023/12/19/mongodb数  据库恢复">mongodb数据库恢复</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-12-19T00:00:00.000Z">2023年12月19日</time> · <!-- -->阅读需 8 分钟</div></header><div class="markdown"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="分析问题现状">分析问题现状<a href="#分析问题现状" class="hash-link" aria-label="分析问题现状的直接链接" title="分析问题现状的直接链接">​</a></h2>
<p>mongo版本： 3.2.17</p>
<p>故障， 服务器宕机之后，重启mongdb会报错，因为是生产环境，所有的配置都是固定的，多次修改配置无效之后，决定将文件系统数据同步到测试环境实现验证</p>
<p><img decoding="async" loading="lazy" alt="image-20231219193404022" src="/bookshell/assets/images/image-20231219193404022-c9a096c42159825159a6bfaeb0cc8473.png" width="1901" height="419" class="img_ev3q"></p>
<p>报错提示：  72 Requested option conflicts with current storage engine option for directoryForIndexes; you requested false but the current server storage is already set to true and cannot be changed, terminating</p>
<p>原因：   使用directoryForIndexes`选项与您当前的数据布局冲突且无法更改：因为server启动的时候请求的为false,但是本地数据默认设置为true.</p>
<p>因为是在容器中，生产环境我尽量保证数据不被损坏。然后下面导入到新环境</p>
<p>新的解决方案就是尝试修复数据，我们需要将生产的文件系统数据先备份然后导出</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="部署mongodb">部署mongodb<a href="#部署mongodb" class="hash-link" aria-label="部署mongodb的直接链接" title="部署mongodb的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="yum-方式">yum 方式<a href="#yum-方式" class="hash-link" aria-label="yum 方式的直接链接" title="yum 方式的直接链接">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo tee /etc/yum.repos.d/mongodb-org-3.2.repo &lt;&lt;EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[mongodb-org-3.2]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name=MongoDB Repository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">baseurl=https://repo.mongodb.org/yum/redhat/\$releasever/mongodb-org/3.2/x86_64/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gpgcheck=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">enabled=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gpgkey=https://www.mongodb.org/static/pgp/server-3.2.asc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>安装MongoDB：</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo yum install -y mongodb-org</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol>
<li>上述命令将安装MongoDB包及其相关工具。</li>
<li>启动MongoDB服务</li>
</ol>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl start mongod</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="二进制方式">二进制方式<a href="#二进制方式" class="hash-link" aria-label="二进制方式的直接链接" title="二进制方式的直接链接">​</a></h3>
<p>官网下载地址：<code>https://www.mongodb.com/try/download/community</code></p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">wget https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-3.2.17.tgz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tar xf mongodb-linux-x86_64-3.2.17.tgz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mv  mongodb-linux-x86_64-3.2.17 /usr/local/mongodb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>创建数据与日志存放目录</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir  /usr/local/mongodb/data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mkdir /usr/local/mongodb/logs</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">echo &#x27;export PATH=$PATH:/usr/local/mongodb/bin&#x27; &gt;&gt;/etc/profile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">source  /etc/profile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#测试</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">root@smart:/usr/local/mongodb# mongo -version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MongoDB shell version: 3.2.17</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">root@smart:/usr/local/mongodb#</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>创建配置文件mongodb.conf</p>
<p>这里直接拷贝yum方式部署之后的文件</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@clickhouse001 ~]# cat /etc/mongod.conf </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># mongod.conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># for documentation of all options, see:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#   http://docs.mongodb.org/manual/reference/configuration-options/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># where to write logging data.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemLog:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  destination: file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  logAppend: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  path: /var/log/mongodb/mongod.log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Where and how to store data.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">storage:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  dbPath: /var/lib/mongo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  journal:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    enabled: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#  engine:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#  mmapv1:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#  wiredTiger:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># how the process runs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">processManagement:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fork: true  # fork and run in background</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  pidFilePath: /var/run/mongodb/mongod.pid  # location of pidfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># network interfaces</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">net:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  port: 27017</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  bindIp: 127.0.0.1  # Listen to local interface only, comment to listen on all interfaces.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#security:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#operationProfiling:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#replication:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#sharding:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## Enterprise-Only Options</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#auditLog:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#snmp:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>修改之后将文件放到 /usr/local/mongodb/mongodb.conf</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root@smart:/usr/local/mongodb# cat /usr/local/mongodb/mongodb.conf </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># for documentation of all options, see:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#   http://docs.mongodb.org/manual/reference/configuration-options/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># where to write logging data.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemLog:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  destination: file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  logAppend: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  path: /usr/local/mongodb/logs/mongodb.log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Where and how to store data.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">storage:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  dbPath: /usr/local/mongodb/data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> journal:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    enabled: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#  engine:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#  mmapv1:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># how the process runs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">processManagement:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fork: true  # fork and run in background</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  pidFilePath: /usr/local/mongodb/mongod.pid  # location of pidfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># network interfaces</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">net:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  port: 27017</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  bindIp: 0.0.0.0  # Listen to local interface only, comment to listen on all interfaces.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="数据恢复">数据恢复<a href="#数据恢复" class="hash-link" aria-label="数据恢复的直接链接" title="数据恢复的直接链接">​</a></h2>
<p>将生产环境的data文件系统数据拷贝到  /usr/local/mongodb/data/ 目录下（打包此处忽略）</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tar xf ~/sys-mongodb-data-claim-20231119.tar.gz  -C  /usr/local/mongodb/data/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>然后启动，观察日志</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/usr/local/mongodb/bin/mongod -f /usr/local/mongodb/mongodb.conf  #启动服务</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="image-20231219195125057" src="/bookshell/assets/images/image-20231219195125057-7e101d70356d57af5da5a67a58feebad.png" width="1892" height="226" class="img_ev3q"></p>
<p>需要修改配置文件增加字段： directoryForIndexes: false ，因为曾经的数据是为true,现在应该是服务启动的时候默认为false .需要手动增加配置</p>
<p>修改后：  增加以下几个字段</p>
<p>wiredTiger:
engineConfig:
cacheSizeGB: 1
directoryForIndexes: true<br>
<!-- -->statisticsLogDelaySecs: 0</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root@smart:/usr/local/mongodb# cat /usr/local/mongodb/mongodb.conf </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># for documentation of all options, see:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#   http://docs.mongodb.org/manual/reference/configuration-options/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># where to write logging data.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemLog:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  destination: file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  logAppend: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  path: /usr/local/mongodb/logs/mongodb.log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Where and how to store data.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">storage:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  dbPath: /usr/local/mongodb/data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  journal:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    enabled: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#  engine:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#  mmapv1:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  wiredTiger:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      engineConfig:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          cacheSizeGB: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          directoryForIndexes: true    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          statisticsLogDelaySecs: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># how the process runs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">processManagement:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fork: true  # fork and run in background</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  pidFilePath: /usr/local/mongodb/mongod.pid  # location of pidfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># network interfaces</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">net:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  port: 27017</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  bindIp: 0.0.0.0  # Listen to local interface only, comment to listen on all interfaces.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>重启服务</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mongod  --shutdown  --dbpath /usr/local/mongodb/data/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/usr/local/mongodb/bin/mongod -f /usr/local/mongodb/mongodb.conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>继续查看日志，继续报错：</p>
<p><img decoding="async" loading="lazy" alt="image-20231219195545511" src="/bookshell/assets/images/image-20231219195545511-2138b671d488dba62dd8c70122921749.png" width="1896" height="410" class="img_ev3q"></p>
<p>这个时候提示directoryPerDB 为true, 所以我们也需要修改为true,默认看日志是false</p>
<p>然后修改配置文件  directoryPerDB: true</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root@smart:/usr/local/mongodb# cat /usr/local/mongodb/mongodb.conf </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># for documentation of all options, see:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#   http://docs.mongodb.org/manual/reference/configuration-options/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># where to write logging data.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemLog:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  destination: file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  logAppend: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  path: /usr/local/mongodb/logs/mongodb.log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Where and how to store data.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">storage:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  dbPath: /usr/local/mongodb/data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  directoryPerDB: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  journal:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    enabled: true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>启动服务,查看日志</p>
<p><img decoding="async" loading="lazy" src="/bookshell/assets/images/image-20231219195858030-1702987146929-1a90f9a16be56c20350ff4e1b44a9c82.png" width="1899" height="382" class="img_ev3q"></p>
<p>看起来 MongoDB 在启动时遇到了与 WiredTiger 存储引擎相关的问题。具体而言，错误消息显示了有关无法读取根页面以及日志文件可能受到加密或来自旧版本的问题的错误。 数据已经出现损坏，需要我们修复</p>
<p>修改的方式，使用--repair</p>
<p><img decoding="async" loading="lazy" alt="image-20231219200220493" src="/bookshell/assets/images/image-20231219200220493-d309425e3c8ed7e4b5532605b61f9757.png" width="1918" height="338" class="img_ev3q"></p>
<p>似乎这个报错跟  前面想相同，可能需要指定配置文件尝试</p>
<p><img decoding="async" loading="lazy" alt="image-20231219200430560" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABJIAAABUCAYAAADZEx2lAAAgAElEQVR4nO2dTbarLNOG7+db7yzSrz0O+2Qc9sM4tM84Qp9xHPqMw6+hxp9oBEN2zM59rVXr7GMIVBUFKuEHAJo7Ed24EJpg1P1nnSgTmuB0IxvXY9NtXQfQQJkmBNdoWUjb6+x0I1CNCaFxWlb1b2Wa7j6/oaxHfjIq3X9R9i7oGoJp1EZa0W4l3bJf7nWI9V+6vY/1i0/zbPyl2HVXv5E2pNbHo/iLs7eLkUk9SKPdfd0s5dfqObX3GT/f59fpt5huwT8TH7TfXaoLCoVCoVAoFAqFQqH8nvwfHmCvduUTwY8A3l7hZ5947wERSFK6OORHAHj88wBEQyvAVlWbt69Q3dT18B6Qi4HRCiJxpXg/13JSOpQ2cCEg9OIuD/Vf998eLMrTCadTice5KuiLwNfVRrpH7PNfnL059Hs+/pbyTK3fOOLtXY+/tHY0zadvLz+jNMv5+aud5f+cn+/z664vpmvzmBYvEG9xvenfxiUhhBBCCCGEkPfxcCBpHcHa2IL/53eky8PwAu1RFQVqC6iLgXMOIQQ4oxJzHPQXbWAuAlsWOJ1OrRR1xADFL6POULCoqmc0y+W/V+n3fPzd5fiq+n3K3l7/3O0o1i/5/ZyC/Ajg/7V1MB5UIoQQQgghhBDyNnYOJK3PDJDJtILYdHmYzpzxqPpBgaJAaT1EGewbCxGclcDXJSp75DdZgdbqydk+PTn9l1u/5+Nvrtdr6ve37X0+v33l5pwppGC6GWHuIoAy7ewwowC5tDPGcgxoEkIIIYQQQgjZxe6BpH8eEHW+W/ojIoD33UyO2HSRpbZrdNolMN1SNqV1m3e31G35ix62bF/m9714L8+4kLPKsPQpI0rjIo9mvyy98C8sKbr72rP+i9VvVOTDmTbPx9/sW8n1GzUTKMHex+RtR2v53dv7nJ/X/LecrluC1y/hLGp4eNTFsJzTlt1MsTLnklFCCCGEEEIIISnsHEgCbFXDy6XdQ6e71s9Yue1blJCup917ReG89AZqr7AQqO5DW5aw6GcpyGiQREE7AzUaHRB9hoKH3bU2xuJqAbloqH6pm9Iwl+eHkR7aO6GfqWGwPF4WM/ule+Ef26EN7s3I7b9Y/caqengonNWyY6Ljryxh5QJnRoMaoqCNHg1m7KjfDf3yzg5Lb0ex+enB4OHvHeUu5rfmv4V0d3662x+prSNCCCGEEEIIIe/nfhfuB6dVzdMZF5oQOnGm0WrhpK/YdEADSKONG9LOTnNqT3jaOE0NaETUfZl335memiXa3Z0CN/hgppczjVKPT22LO2Hqsb1zXVc/VybyFLGxX1xjtCyfuBXlvwR7o/Ub17VpT4PrdL0rPzr+1F3d3duSUL8x+kXZmxJ/MfbGnso36Ogmea2cVBjpZ1nM7/7UNqen9eEWTvtTZjhpbuIXCoVCoVAoFAqFQqG8W96uQLL0g0lGCV8ugaY/4n0+gHAcObp+tBdAN/i1PUhLoVAoFAqFQqFQKJTvlf+6Pz4O6ZYnDcuvPGxZgNunEBKDgjY/+FdVaPcXF2jncEGNokhfKkcIIYQQQggh5Dv42IEkQshziNLQ+nLbF8rbGmXJQSRCCCGEEEIIIetwIIkQQgghhBBCCCGERLH71DZCCCGEEEIIIYQQ8l1wIIkQQgghhBBCCCGERMGBJEIIIYQQQgghhBASBQeSCCGEEEIIIYQQQkgUHEj60yiYEOC0vFuRFWb6KYMQwkgM1HsVnPK0fkevj8yIhgsB5uakL7P/t7jzM9lGoF1A+EanfVy7/C39PswPvF/+LbK3y8jv8/6xD2XgRvFN/834uPvMThgH5Ms53ECSMgHBaWx1NaIMnBs9pDgDrT6vg4q1dw+iNRQsquqYB7rf6WdLnE4nnE4nFPUBdX5Sv6PXxzFRMMGhffZoX/55oybkb/HK+2AsR++feb8kKfym/47Qfn8XBWMUUBe3GC/tu3Uivw/jgJDDDSRtI1AmwGnAln3jLVBawcU4vmTeUNAXga8rHLNfO7p+ufk2ezOhzlDw+OcByBlKPDzfK8jTeFTFCSc+9REAx++fj65fbr7N3tzQfy9FfiAA/D8+jHw1jANCVgaSblMSBcq4btaPg5lPSRQNEzMraDNdO+XxNi1QLqOpgtPp0KINjLIoixLV7Y3Sw1Ylag+oc596rHurvzNq9otJN9XS9VMTHYxSN12dnpR8NwvKOYPFSVCb/ou3dy/Lv0YtTy1d/jUpxn+x9sbql2xkZPwp6LEtzuBetYT63aXqg/qIir8Ye/v6VZO6c2bll8LxlFxnoNXKFPdIP8s8v1XfyaQ+VuMKXXu21/ZhWATiLa7JIfOtfn4T0fePebt0q37ejpfY9jv0vSFsLG3b0a8dkXztMnd9pN4HJa697YD3y3E63i+P1Y/H3y8f+y+l3Nzt97Xx8luI7urBXSDo+oKxD5JgPMfG80Oi+qsYO+L9lzcOCPl8mjsR3bgQGudcY5R016VRWjdqnkarRrprokwTQmiMWshrK10nyoQmOH1LOxXVmBAap2X4vwtNCKEJzrR/d9/t81GCm/6iTGNu3x3yC0Y1gDTahSYE12hBA2WaEMxgr9KNGdkASKOMm6ZJ8V+Uvfe2L5a36afH15d0iPNfur2P9RtE9Ipvk+OqK8uM6k5Uo83M5yn1G6NfQn1ExV+UvX2MjOrh9r1Z2d31IV3/3Z3tNyq/8bVpuol+XV7hkRgV4fdv9fObJao/GOpkbK/bEy872u8tDh7FUXK/dkDJ2S5fWB8x9/2o9rZLeL+8K4v3yx3tKMHPWdtlQrzE2pG1/abnd3i5+fGZfBjPcfG87cPN/iq3/7LGAYXy8bJwsX+Re/CQvXbjmF+PTbd1HUDXuXYd7Txtr7PTjUQ8eLUyTXef31DWIz/ddSIR/ouyd0HXmBvv+kNb7INxYueeYO9j/eLTPBt/KXYt3SRSHoxj6+NR/MXZO34w6dMsvzAv5dfqObX3GT/f59fpt5hubUC290H73X037G/z85sl2/0jMV5W9Fj2S/xAUtqg5bEkb7t8XX1EDSRttbfuxWBdUgc5eL9MEt4v33u/jPj8qfvH7vabnt/hJeNAEuN5/4BibNzl9t+fiGEKJZM83CPJXtdWVwt+BPD2ivnEWe99uwQlKV0c8iPAbb8UDa0AW1Vt3r5CdVO33UdFLgZGK4jEleIfbr4iUHq6O38/rXGNdf/twaI8nXA6lRtr3nOsjd/nvzh7c+j3fPwt5Zlav3HE27sef2ntaJpP315+RmmW8/NXO8v/OT/f59ddX0zX5jEtfrSUTX4gyLM/0rf4+d3suX/Yq733c1S8vKr95u7Hf5PXtMt31cdmextt7rwsS/dO3i95vzx2Px59vwTw2H8p5eau39f1z38FxvOS7Y+I7a9y+48QMmbnZtuCtWel6aZjseny4Ed7JlVFgdoC6mLgnLutxU1j0F+0gbnIaIPvE05FfbwXOHXOcFJHLv+9Sr/n4+8ux1fV71P29vrnbkexfsnv5xTkRwD/r62D3fsjRZX01X7u92wZHvBX9lSITbddIEQAuYz3lInYs+ihCR/SP8eQrT5eFC8RfEx98H4Zle4uR94vk9L9Sj8ObPjvffX7Ef1BtvtbNoUYzw/JbQchZA//2/e17he4hU/6WUNp6fIw/SXQoyoLVO0HUNrAKAOj9hzPKDgrga8LVPbIHY9AawVfFxlO6sjpv9z6PR9/c71eU7+/be/z+e0rNza/GBTMZKNOgxCGT124tDMPXnLa1jf5eVx8heJU5Uu3nRG8B7wtUGQ5mvpT+udIstXHi+JlkzfVhzIbA5EW5WRWEu+XvF8+l9++cl/VLrf89676/ZD+Odv9LTffGs9b5LaDELKHnTOS2ul+os53jVNEAO+7phmbLrLUdo5hOwWyW8qmdPerQbfUbfmLHrZsp/pK+vxJrI1oy/nJ0wZyozQu8ujXvKWlQRFTSp/2X6x+oyIf/lLwfPzNvpVcv1G/ZCTY+5i87Wgtv3t7n/Pzmv+W03VTiPslnEUND4+6GJak2LL7JfNlR7b/LT8fl86OyJ8xH8cL8DH986+Ts12mpHtTfaQubeP9kvfLJ/I7xv1yREQ8x5Wbu/2yf36OL43nnXakpNvnP0LImJ0DSYCtani5tHsCdNdEGZjxvkUJ6XraNasK56WewV5hIVDdh7YsYdEdOWpk9NCnoJ2BGt29RJ+h4GF3rY2xuFpALvp2XKkoDXN5/jb40N4J/VGrS8ciA8OvUY/2Fug61LEd2uDejNz+i9VvrKqHh8J55XzY6PgrS1i5TI8YFQU9OdJzR/1u6Jds7wap7Sg2Pz0YvHika2o7n+S35r+FdHd+utsfqa2jV/On/HxgbFnCKjM7+rc7Inp+3O5mvLyuf/50srfLqHTp9RF/H8wF75e8X6bnd9j7ZaT/4srN3X7ZPz/L98Vzz+P3nrj+Kr//CCEDuweS4CsURQ2vhg30nAbqsphO5Y5Nd0teorbAxfVrlccdiEVVe8jFQEv7/7Lo11uX7d9FBQ+La3nF2Qx7cDgF1EWBvT922bJAbQXG9TYIqvL5Nd6P7U0g8tc8W5awXnV2OGiUC/WQ33/Jvzb6CmVtITcdXFfnw+dxcWVRFiVqjNa/mzMwu3kk1++Wftl+XU21NyG/cqS/OcNX7Syg6V6D8e28nOe34j9fl/Bn0+1DYCC2vFvipM4K/f5IclaQ3/rV6A/5+dhYlKcCFrp7UGz7PnP2qGZt09c1oN0kXspZvMS2X2XCrb1eBO1yqDB858+RuV226fLVx6BmpvtgLLxf8n6Zmt+B75fR/ossN3f7fdXz89fwbfEcTVx/ld1/hJAJbz86LlXa4yJdY5TsO6b2z0l7RGX08cPUj/YuiTJNGB05S6Gf3yuJx6pTWB9RcvT++ej60V4AB+rHP9R/lGPJYeKZQqF8mLxdgV0iohrjXBNC6MQ1Rr1fLwrlM0Q12uhG3R4a2ofR4DQHZ+nng8hfGbj4K8L6oHyrsB+n/CVhPFMolDyy89S29+O9RVlwTiIh+7C4Xn+gTYDplhh4W6MouV48L/QzIYR8NuzHyV+C8UwIycN/aEeUCCGEEEIIIYQQQgh5yP7NtgkhhBBCCCGEEELIV8GBJEIIIYQQQgghhBASBQeSCCGEEEIIIYQQQkgUHEgihBBCCCGEEEIIIVHMBpIUTAgIM3HOQEnGUkXDhQCjZuUOF+50cjpBAWVmNhgs5fw5CJQ2cDd7HIxWyFklj8rWLtH/u9lR15+AMgjB4a+ZdWNXe2vjarnNfxuRcf9b/dpd/5ybP9rOo2DcH4tvq49vs5cQQgghr2JxRpItTzideilQWYFxr3wRtrhaAOp8/2LUXfP/Eg6ltOVN/6L+/MMslXEwyqMqujopKuBioA/0LKhMQHD6lwa3yKH4Y+3tsNDPhJAFeP8lhBBCyG8TsbTNw1YVLATq/LrHFHu1AAQ/syLUWeE20PSNKAOjLMqigu3fHb1FWdTgq+SHYMt2QJYVNqIbGC2/tWGT74Rxfyy+rT6+zV5CCCGEvIon9kgSiDJwbnsJnKjRsixnlmc22evCYFU3sGSvsKNrseVus7zEYvXXPVHQxg1LS5yDzrrm765AaK1m9nf4CpWdpt32S2+vghrZ4czeXzKHpZBGAZDLaPndM8tuJEK/GHvXp/Ev1nHW+u3KHi1HXJ3RJxpmnNaZWbmpcdovTRr70cHcvp8SBznb21D2zdaHy1kj43Tev6gnl2ZtxsGr/CeTcp15cvlqZDxH9c/bhW0sgV36PKadx9jxmn4trr1NbQjBrdTbB8R9bjb7oT5dfP1ut4/Y9hZTH4l2JPglrr/fsjfl/ptmb6x+edobIYQQQj6VZhDVmBAao8bXpFHaNSG4RsvoutKN0aqRcTrjmhBMo8Z5im5cCI1R0v2/LSMslKNdaIJRC9/dUW4notc/6+11WibXlQlNcHpUxpA2mKFsUeZev3n61bJjZFm/RYnyS6+TG9VH6+OoMh7Iss/22RulX2QcLNf/kl9T6zdBlLlvP7MYd3pa7rR9pMTpKE838iOkUVp3fsjv57j2NpaF9r4nDqL7l8QYfBgHuf031nlqx1q73PZzZDxn9J8ya/WJWV+e0g9lro+EGIhpb/01dWvb0ogyjVkt96hx/wLZ7IdS6zeifST2V4/rI8WORJ9E9Pcp/UH8/XfD3iT98j9HUCgUCoVC+SgZ/2d4gJmIc42OeThdGPhZesBpX4LuH3jvXo4evYBvlLua54K9KS8M8we19Qe4fANJu18M7vwyPLQP6SIepCMk60DSXv0W42DBhwtxlV6/CfIgjuPK3TeQtO6zV/i5lawDSRH6pfQvz8TxUn3k81+X36Id+wbsYuM5p/8e6qTM6LPn6jd7fazE33Z7SxjoP3jcv0Q2+6HE+k1oH0t6LPslfiDp2XvkK+3NNZD0nvZGoVAoFArlEyVis+0TisrjYuZT5ucniQUEd7mb9v8jgLfXyX4+/moX9/dpryucu3LUWQHe4jpJHFNubpbtALq9nUQWyrcoTyecTuX9srQX6RjrF+8ntYF/HoD8HGZaepx+sfa2+2up8xC893G1p35zsF6u9/7pcu3GxmJ5/Zyfbf3S+pdt0uIgt/+W7bjfNy6fHXn9N9V3ujxMfgTwflrOzvq9tyM2v9x4eA/IxbSnaEqekn4/7l/Lej+UWL9R7eN1/dVWf7pNWn+frz94kX4Hf44ghBBCyGuJ2iPJ2xKlBZQe1sCLNjAXgS2LYdDpbgNoQdKztf+H9llEsPZQE1dublo75DLeCyNir4FcpUc8Ob7HL+8jxV7bjiR1e0a0A5XTuHpX/a63j6RTCl/IseMqsX+JzC9nHBy7v8rsP/8Pvs+ze6EUdW7/Fbn17/nteBceVVGgtoC6GDjnbnvZvJbccd9nq2cDMGt7VkWm2y7wj7S3WI7e3x9dP0IIIYQcif/FJvTeA6r9RcpDcFYCXxeo7KMHjO4X22h12tkjRp0hV0DJ/AEmttzctHZ4W6D41aO32nKVtF5f511+eReJ9torLAzOCrA4Q8Gjvk5/TX1n/S61j3bw8N11efS4Su1f4vLLFwdH769y+6/tv/WPQH4UUJeolcZZ/kEUYJNPinpXu0zBoyoLVAAg7WwYowyMOuF1B2Plrrc+2wrFqcqXbjujP9LeYjl6f390/QghhBByJKJPbWt/Ue6XJiz/ciXn+aki7XTn/lfp9XQD/ZT281kg3YvJ6JuR5Y40ePhLWvvgNMttYep4Z8dLfgZ+hEdVjWfTjBANfbuY7pfPJtXeYXnb8nLJ99XvUvsA5u0tNk5zk7u95Sa9f4nKL1scpPlv2Y5uychc041+Lc6O3P5rf3AQ1fZN9tq1O32GLMbwZm5va5e72pv3sGUFi7hZpPvJX2/vIa1+t9vH0e+Dsf19dy2hP3iHfoQQQgj5bqIGkkQZ6MlyoPYFQS76dqyuKA1zWdihpqrh5TIcHysKeiHd8IUrLBQul6Vj7+PLveF9t+/S4q4k7YPTOD9tsJSdLUtYZWZH8HZHDS8ee9sftzs/hjcRW6H2CsYNOkIUzGTfhx1+yUy7h4LC+VeKTLe3Xd5mYO6WtXWfJ9dvHvr2YfRQrnR62qq6DSTFxmlm7TK3txdouNS/PFF23jhI9N9CP+nranmPtQ0/x9qR3D9v4Ns3USi0g7X+n4eo/S/A72mXse1NQTvTzRjt07UzHu31ta/cueP+XSTV72b7eP99cIu4/r7/IL4/yHX/TdIviUzPQ4QQQgg5DIsDScpM9ytwWuDL6fRzWxaorcC4IU1VLuxF4CuUpYWYbh8Ec4ZfSjd84fZr8NLmltHljsuvR+UHBy3j/EpYr7r8HDTKlSUJFuWpgIXuHojahyJz9qieesDaot2Ho7QC7YY9KVCXqEZ6Jvslt5ZVidoCFzf45pUPjMn23gYl117y3lS/vkJR1PBq2CC2rd5iEofxcZqX3O1t6Ftc+2KuzKSfScZXKOb9S1XD75oBA+SOgxT/+bqEP3f+cAZiy/UlPxt+jrYjuX/eMrhrZ/1+SP3/734UiM7wLe0yrr1ZXMsrzmbY48cpoC4KzKvt+HH/LuLr19c1oN2kfZQzR8e2t+z1EUtkfx9r75Dt4/tvtL0J+hFCCCGEvP3oOArlT4syTQiu0XIAXb5B6G/KN8qfjfv2uHmn5QC60F4KhUKhUCgUAE30HkmEkD3Iyr5MJA8K2oyWfUKgNf1N/jqMe0IIIYQQ8j44kETICxA9LDkyYlGXr1z++M1YXK/AebR0Q/kaRUF/k78M454QQgghhLyP/9BOTSKEEEIIIYQQQggh5CGckUQIIYQQQgghhBBCouBAEiGEEEIIIYQQQgiJggNJhBBCCCGEEEIIISQKDiQRQgghhBBCCCGEkCg+eCBJoF2A07Kd9K8hGi4EGPVuRRRMyFgHynQnEPVikM/EF8SLMnAjfd9fH3+Rtt5CTud+Vb29wH+EEEIIIYSQr2Z1IEmZgOA0vnCYhrwLW+J0OuF0OqGoj36ItYIxCqiLm86lfbdOZJu/UW/snwkhhBBCCCHv4n/vVoCQj0R+IAD8v6MPeH06HlVxQpUru6+rt8z+I4QQQgghhHw9sxlJ7VKl23IPuYyWgCwsM7otsRIo47p0Dma0fGjtl/PX/qLeLbly/RIWB6MUjGttcXpmiejbZyEEBGegldznp9XIzgBnVvQfL51xBlqtLEXbLLdLNs/vcNMQJM4voqBH6YJzi/ZuM9SHnpSrXj5DQ3RXnrtA0MXx2hKpyPqNaUdx5I77RP2y1e9gyy2vxaVZ8e3yPfWWUh/StvNRuc4ZTItN6Z9j/Bdrb2L/RwghhBBCCPnzNEuiTGiC042sfA6ggejGhdA45xqjpLsujdK6UX0aZZoQXKNl/F3VmBAap2U976ekzT8Y1QDSaBcGHZRpQjCDfr0NWt1sFWWaEEJj1Cy/MLLz9r2ZDd31IV3/3XF+seUm5PcWSfDLqE7G9roVO0S7aT0tlnvvl9fF1HLsr9ZBbP3GtqO3xH2Kfmn1Gy+dHUY9GX/vqLeE+lC6MaMyAWmUWW8DUf3zpv9i7d3hZwqFQqFQKBQKhfKXZfmDlIGk1ZcUoFkcNFocXMop0zIntohu3KjsNTun18cvhH2a5Re0pfzaQZHpi2hcufH5vUee88uj61EDSYt+WftOZtkYkEiyN6odvSPu4/VLrd94iRhIioi/99RbfH2k6pprICl3/0ehUCgUCoVCoVD+vmQ5tc1eH+1Wa3G1gKhztwxCoLUCvMX1l7Yp8X6tIMGPAN5eMU/hvQdEJks3pvl4/PO47bnyKD9/tbP8Y8uNze+97PUL0MXOzM/R5S76pS3rvaTFVc/jdpROrrjf1u819RvLdvzF8tp6W6+Ptmylp6fJ9cvwXkfu/o8QQgghhBDyDWQZSNrCVjW8KJwFgJyhBLBV9cbBEIHI+N979m3Gu55fbLppubH5JdLt7TK8sK7taRSZbrtAiAByGe2fE7N3y8eSO65y8dq4//z6/e16G8oTbWAuAlsOp8mdivrFfeRR45QQQgghhBByZH7n1DZ/hfUXXLTC1SsILKpDHLnt4T0WB0fkR4Dk17j1/PaVG5tfIr5CcYo4xyk23XZG8B7wtkBRfcMLau64ys1r4v7z6/dd9SY4K4GvC1T2N/139DglhBBCCCGEHJFfmZEEeFytB5SGUQLYKw4xjtQtzxiW3Q2ICOB94qvUcn5ynp8mFltubH5Hp7MjYXpVzIyIZb90S27eSu64ys2L4v4l0+d+k3fV2/LMoNe386PHKSGEEEIIIeSIrA4ktXtkdMvRMtDvXyPiUR9jOhKAftndBUYPL22iDIzat/yuz+92fLaoxaPDY8tdzO/yeS/stixhlYEz45fj7sjzpWPEvYeHwvnR8fELfvF1dYhBytxxlZvscZ9avwflPfXW7SN30RjCWcM8aOe5+uejxykhhBBCCCHkeKwPJFUlagtcXL/ficFTu534ql3O9oubbEfhKxRFDa+GjW6dBuqyQLlnRMJXKEoLMd1+MeYMX9Xw3TKS5HJ9hXKeX/nqvVNegUV5KmChYcIQU+bsUS29sPoKZT2yOzjo2Uuzr2tAd587A7ElyqMsrcodV7nJrl9i/W6gTLjV+0UAKHPbd8nNAyEnb6o3WxaorcC4wcbqQTvf6p+j/Xf0OCWEEEIIIYQcjv/QHt/2CyiYYCD1p++jsgNlEIygLgp8m+mv4YtjiRBCCCGEEEIIeSO/tEcSIFpDwaL68y/+CtoMS1QAgdbqeDOxCCGEEEIIIYQQQhJ5/UBSt6TCXbp9VF5e4LuxuF6B82hpifI1ioL7jRBCCCGEEEIIIeSz+cWlbYQQQgghhBBCCCHkk/m1pW2EEEIIIYQQQggh5LPhQBIhhBBCCCGEEEIIiYIDSYQQQgghhBBCCCEkCg4kEUIIIYQQQgghhJAoOJD0p1EwIcBpebciK8z06074G8RAvVfBKU/rd/T6yIxouBBgbk76JPsF2gUEc6gI/Ew+Og4SUAZu1D8wdAghhBBCyF/lcANJygQEp7H1iiHKwLnRS70z0OrzXkxi7d2DaA0Fi6ryL8j9ee70syVOpxNOpxOK+oA6P6nf0evjmCiY4NCOObSDO3xBJ8dDwRgF1MWtjyjtu3UihBBCCCHkNRxuIGkbgTIBTgO27B/aC5RWcDGOL5k3FPRF4OsKx3yfObp+ufk2ezOhzlDw+OcByBlKPPyvjMN5VMUJJ44GkBjkBwLA/+MgMSGEEEII+fssDyTdliIIlHHdrB8HM1+KIBomZlbQZrp2qcNtOYBcRksEpsuHRBsYZVEWJarbG6WHrUrUHlDnPvVY91Z/Z9Rs5k+3xML1SxIcjFI3XZ2elHw3C8o5g8VJUJv+i7d3L8uzX5aXlCzPiorxX6y9sfolGxkZfwp6bIszuFctoX53qfqgPqLiL8bevm9RBMgAAAOMSURBVH7VpO6cWZnxNl6K4wy0mi9Bii23SzbPb9V3MqmP1bhC157ttR18E4F4i2tyyKwvU7uP/aFthrC2tC2x3jZhHGzFQRRR7TzGjnj/ie4+dxcIunji0jZCCCGEEPIFNHciunEhNM65xijprkujtG7UPI1WjXTXRJkmhNAYtZDXVrpOlAlNcPqWdiqqMSE0TsvwfxeaEEITnGn/7r7b56MEN/1FmcbcvjvkF4xqAGm0C00IrtGCBso0IZjBXqUbM7IBkEYZN02T4r8oe+9tXyxv00+Pry/pEOe/dHsf6zeI6BXfJsdVV5YZ1Z2oRpuZz1PqN0a/hPqIir8oe/sYGdXD7XuzsrvrQ7r+uzvbb1R+42vTdBP9urzCIzEqwu9b9fUoDrv6WCwnod4S4oNx8LhPiGpjW+08t//u7N6jO4VCoVAoFAqF8nGycLF/kXvwsrY2ADK/Hptu6zqA7qWqe8Gap+11drqRiIGKVqbp7vMbynrkp7uXhwj/Rdm7oGvMS+r6IEfsQFLiS12CvY/1i0/zbPyl2LX0cpgykBRbH4/iL87e8YBEn2Z5QGQpv1bPqb3P+Pk+v06/xXRrA7K9D9rv7n9RX/j+rD+ZyvZA0u5+g3GQFgcREtvOc/svpq+gUCgUCoVCoVD+mjzcI8le1/YHEfwI4O0V81Um3vt2CUpSujjkR4DbfikaWgG2qtq8fYXqpm67j4pcDIxWEIkrxT/cfEWg9PRUnn45wxrr/tuDRXk64XQqN/bYybEXzz7/xdmbQ7/n428pz9T6jSPe3vX4S2tH03z69vIzSrOcn7/aWf7P+fk+v+76Yro2j2nxo6Vs8gPBM/sjWVzteOlr9/eupXJTHvcbOfP70jjYJLad5/YfIYQQQggh38nOzbYFa2ML081GY9PlwY/2TKqKArUF1MXAOXfbgyONQX/RBuYiow2+TzgVdcQAxS+jzhlOBsvlv1fp93z83eX4qvp9yt5e/9ztKNYv+f2cgvwI4P+1dbB7f6QB244kdXuQKbTjSDGDjKnk9sd3x8E2ue0ghBBCCCGEPGLnQNL6zACZ/Jwcmy4P05kzHlU/KFAUKK2HKLNzA1TBWQl8XaKyR37hEGitMp0MltN/ufV7Pv7mer2mfn/b3ufz21duzpPUhs2u3UUAZYZNr/tN6fcGob3CdgNI/Wlw9tnpSL/KN8VBCrntIIQQQgghhDzi/wFbiLqJ/XAhWQAAAABJRU5ErkJggg==" width="1170" height="84" class="img_ev3q"></p>
<p>提示报错， 不能开启journaling配置，需要注释掉配置文件中此项</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">storage:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  dbPath: /usr/local/mongodb/data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  directoryPerDB: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  #journal:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   # enabled: true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>然后继续操作</p>
<p><img decoding="async" loading="lazy" alt="image-20231219200633226" src="data:image/png;base64,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" width="1084" height="89" class="img_ev3q"></p>
<p>根据提示，数据修复成功!</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="数据导出导入">数据导出导入<a href="#数据导出导入" class="hash-link" aria-label="数据导出导入的直接链接" title="数据导出导入的直接链接">​</a></h2>
<p>数据导出：</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mongoexport --host 127.0.0.1 --port 27017 --db sensorcmd --collection new_alarm --out new_alarm.json --jsonArray</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="image-20231219200855720" src="/bookshell/assets/images/image-20231219200855720-620b120191f13dc81d6ff33763b8067d.png" width="1471" height="90" class="img_ev3q"></p>
<p>导出说明：</p>
<p>--host：MongoDB服务器的主机名或IP地址。
--port：MongoDB服务器的端口号，默认为27017。
--db：要导出的数据库名称。
--collection：要导出的集合名称。
--out：导出数据的输出文件路径。
--jsonArray：将每个文档导出为JSON数组的元素，而不是多个独  立的JSON文档。</p>
<p>数据导入到生产环境</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mongoimport --host localhost --port 27017 --db mydb --collection users --file users.json --jsonArray</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="image-20231219201205941" src="/bookshell/assets/images/image-20231219201205941-caf613f72f77fce1964ed4c81300244f.png" width="1344" height="78" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="问题">问题：<a href="#问题" class="hash-link" aria-label="问题：的直接链接" title="问题：的直接链接">​</a></h2>
<p>经过上面一番捯饬，数据都导入成功了，但是数据是还原了很少的一部分，很多的数据还是丢失了。 。所以，以上这种情景并不能还原所有的数。下面，通过第三方工具实现对数据的恢复</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="wt工具恢复mongod数据">WT工具恢复mongod数据<a href="#wt工具恢复mongod数据" class="hash-link" aria-label="WT工具恢复mongod数据的直接链接" title="WT工具恢复mongod数据的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="wt安装">WT安装<a href="#wt安装" class="hash-link" aria-label="WT安装的直接链接" title="WT安装的直接链接">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">需要的环境： </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 操作系统:  centos7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> mongod版本: 3.2.17</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>依赖安装</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">yum install -y epel-release libtool automake snappy snappy-devel lz4 lz4-devel zstd zstd-devel libzstd-devel zlib zlib-devel git make vim-common</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>安装源码-需要借助其他工具</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git clone https://github.com/wiredtiger/wiredtiger.git</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>根据所使用的MongoDB版本，应该选择正确的<code>wt</code>分支。例如我当前使用的<code>MongoDB 3.2.17</code>，那么同样应该选择WiredTiger的相应tag MongoDB 3.2.17</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@113 wt]# git tag | grep 3.2.17</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mongodb-3.2.17</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@113 wt]# git checkout tags/mongodb-3.2.17 -b v3.2.17</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="编译源码">编译源码<a href="#编译源码" class="hash-link" aria-label="编译源码的直接链接" title="编译源码的直接链接">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sh autogen.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./configure --disable-shared --with-builtins=lz4,snappy,zlib,zstd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">make -j $(nproc)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">make install</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="通过wt恢复数据">通过wt恢复数据<a href="#通过wt恢复数据" class="hash-link" aria-label="通过wt恢复数据的直接链接" title="通过wt恢复数据的直接链接">​</a></h2>
<p>启动Mongodb ，安装mongod参考 yum部署方式</p>
<p>任意创建一个集合，我们将把数据恢复到这个集合中：</p>
<p><img decoding="async" loading="lazy" alt="image-20231220194042182" src="/bookshell/assets/images/image-20231220194042182-9d06edb5ea181df53e64ee14bbbca105.png" width="1344" height="473" class="img_ev3q"></p>
<p>collection-2-2766252704149925868 即我们要使用的目标文件名。此时应:</p>
<p>81--1313801531657640813.wt : 我们从生产环境出现问题的wt文件中导入到现在的测试环境，然后进行修复</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rm -f   collection-2-2766252704149925868.wt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mv 81--1313801531657640813.wt  collection-2-2766252704149925868.wt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="修复">修复<a href="#修复" class="hash-link" aria-label="修复的直接链接" title="修复的直接链接">​</a></h3>
<p>让wt帮我们修复文件(非常重要的一步)</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">systemctl  stop mongod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wt salvage file:collection-2-2766252704149925868.wt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chown mongod.mongod collection-2-2766252704149925868.wt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl  start mongod</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>验证数据没有问题后，然后导出数据</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mongoexport --host 127.0.0.1 --port 27017 --db demo --collection restore --out new_alarm20231220out.json --jsonArray</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>在导入 到生产环境中去</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mongoimport --host localhost --port 27017 --db sensorcmd  --collection new_alarm --file new_alarm20231220out.json --jsonArray</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="image-20231220194809118" src="/bookshell/assets/images/image-20231220194809118-e2af97bc61b94ed1b3950daa7259e92f.png" width="1733" height="1059" class="img_ev3q"></p></div><footer class="row docusaurus-mt-lg"></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/bookshell/blog/2024/4.npm操作">npm常用命令</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-10-18T06:15:14.000Z">2023年10月18日</time> · <!-- -->阅读需 6 分钟</div></header><div class="markdown"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="简介">简介<a href="#简介" class="hash-link" aria-label="简介的直接链接" title="简介的直接链接">​</a></h2></div><footer class="row docusaurus-mt-lg"><div class="col text--right"><a aria-label="阅读 npm常用命令  的全文" href="/bookshell/blog/2024/4.npm操作"><b>阅读更多</b></a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/bookshell/blog/config-docusaurus-v2">config-docusaurus-v2</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-10-18T00:00:00.000Z">2023年10月18日</time> · <!-- -->阅读需 4 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/shouji1128955/bookshell" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo authorImage_XqGP" src="https://avatars.githubusercontent.com/u/49987752?v=4" alt="zhanglaiqiang"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="https://github.com/shouji1128955/bookshell" target="_blank" rel="noopener noreferrer"><span class="authorName_yefp">zhanglaiqiang</span></a></div><small class="authorTitle_nd0D" title="liteshell.cn maintainer">liteshell.cn maintainer</small><div class="authorSocials_rSDt"></div></div></div></div></div></header><div class="markdown"></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/bookshell/blog/tags/action">action</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/bookshell/blog/tags/docusaurus">docusaurus</a></li></ul></div><div class="col text--right col--3"><a aria-label="阅读 config-docusaurus-v2 的全文" href="/bookshell/blog/config-docusaurus-v2"><b>阅读更多</b></a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/bookshell/blog/github结合actions实现自动化部署">github结合actions实现自动化部署</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-10-13T00:00:00.000Z">2023年10月13日</time> · <!-- -->阅读需 7   分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/shouji1128955/bookshell" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo authorImage_XqGP" src="https://avatars.githubusercontent.com/u/49987752?v=4" alt="zhanglaiqiang"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="https://github.com/shouji1128955/bookshell" target="_blank" rel="noopener noreferrer"><span class="authorName_yefp">zhanglaiqiang</span></a></div><small class="authorTitle_nd0D" title="liteshell.cn maintainer">liteshell.cn maintainer</small><div class="authorSocials_rSDt"></div></div></div></div></div></header><div class="markdown"></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/bookshell/blog/tags/action">action</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/bookshell/blog/tags/docusaurus">docusaurus</a></li></ul></div><div class="col text--right col--3"><a aria-label="阅读 github结合actions实现自动化部署 的全文" href="/bookshell/blog/github结合actions实现自动化部署"><b>阅读更多</b></a></div></footer></article><nav class="pagination-nav" aria-label="博文列表分页导航"></nav></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://shouji1128955.github.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">LiteShell<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://kubernetes.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">kubernetes<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://mindoc.zlqit.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">mindoc<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/shouji1128955" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 My Blog Project - LiteShell</div></div></div></footer></div>
</body>
</html>